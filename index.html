<!DOCTYPE html>  <html lang="en">  
<head>  
<meta charset="UTF-8" />  
<meta name="viewport" content="width=device-width, initial-scale=1.0" />  
<title>Luvie Edits</title>  
<link rel="icon" type="image/png" href="sumireyoshizawa.png">  
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;800&display=swap" rel="stylesheet">  <style>  
  html{scroll-behavior:smooth;}  
  
  body{  
    margin:0;  
    font-family:'Montserrat',sans-serif;  
    color:#fff;  
    text-align:center;  
    background-image:  
      linear-gradient(rgba(0,0,0,0.65),rgba(0,0,0,0.65)),  
      url("Background.jpg");  
    background-size:cover;  
    background-position:center;  
    background-repeat:no-repeat;  
    background-attachment:fixed;  
  }  
  @supports (-webkit-touch-callout: none) {  
    body { background-attachment: scroll; }  
  }  
  
  :root{  
    --cursor-size: 56px;  
    --cursor-offset-x: 10px;  
    --cursor-offset-y: 10px;  
    --p5-red: #ff003c;  
    --p5-red2:#ff2a5c;  
  }  
  
  /* Hide system cursor ONLY on non-touch devices */  
  @media (hover:hover) and (pointer:fine){  
    html, body { cursor: none !important; }  
    a, button, input, textarea, select, label, [role="button"] { cursor: none !important; }  
  }  
  
  .gif-cursor{  
    position:fixed;  
    left:0; top:0;  
    width:var(--cursor-size);  
    height:var(--cursor-size);  
    transform: translate(-9999px, -9999px);  
    pointer-events:none;  
    z-index:2147483647;  
    user-select:none;  
    -webkit-user-drag:none;  
    will-change: transform;  
    display:none;  
  }  
  .gif-cursor img{  
    width:100%;  
    height:100%;  
    display:block;  
    user-select:none;  
    pointer-events:none;  
  }  
  
  /* ===== INTRO ===== */  
  .intro{  
    position:fixed;  
    inset:0;  
    z-index:99999;  
    display:flex;  
    align-items:center;  
    justify-content:center;  
    background:transparent;  
    opacity:1;  
    transition:opacity .55s ease;  
    pointer-events:auto;  
  }  
  .intro.hide{ opacity:0; pointer-events:none; }  
  
 #introVideo{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;

  pointer-events:none; /* âœ… makes Skip clickable on mobile */
}
  
  .intro-skip{  
    position:absolute;  
    top:calc(16px + env(safe-area-inset-top));  
    right:calc(16px + env(safe-area-inset-right));  
    padding:12px 16px;  
    border-radius:14px;  
    border:1px solid rgba(255,255,255,0.18);  
    background:rgba(0,0,0,0.55);  
    color:#fff;  
    font-weight:800;  
    cursor:pointer;  
    z-index:7;  
    -webkit-tap-highlight-color: transparent;  
    transition: opacity .22s ease, transform .22s ease;  
  }  
  .intro-skip:hover{  
    border-color: rgba(255,0,60,0.55);  
    box-shadow:0 0 20px rgba(255,0,60,0.25);  
  }  
  .intro-skip:active{ transform:scale(0.98); }  
  .intro.outro .intro-skip{ opacity:0; pointer-events:none; }  
  
  /* Tap-to-enable-sound overlay */  
  .tap-sound-overlay{  
    position:fixed;  
    inset:0;  
    z-index:1;  
    display:flex;  
    align-items:flex-end;  
    justify-content:center;  
    padding-bottom:calc(22px + env(safe-area-inset-bottom));  
    background:linear-gradient(to top, rgba(0,0,0,0.55), rgba(0,0,0,0));  
    opacity:0;  
    visibility:hidden;  
    transform:translateY(10px);  
    transition: opacity .55s ease, transform .55s ease, visibility 0s linear .55s;  
    pointer-events:none;  
  }  
  .tap-sound-overlay.show{  
    opacity:1;  
    visibility:visible;  
    transform:translateY(0);  
    transition: opacity .55s ease, transform .55s ease, visibility 0s;  
  }  
  .tap-sound-overlay.hide{  
    opacity:0;  
    visibility:hidden;  
    transform:translateY(10px);  
    transition: opacity .55s ease, transform .55s ease, visibility 0s linear .55s;  
  }  
  .tap-sound-btn{  
    pointer-events:auto;  
    padding:14px 18px;  
    border-radius:16px;  
    background:rgba(0,0,0,0.65);  
    border:1px solid rgba(255,255,255,0.16);  
    color:#fff;  
    font-weight:900;  
    letter-spacing:.4px;  
    cursor:pointer;  
    -webkit-tap-highlight-color: transparent;  
    box-shadow:0 0 30px rgba(255,0,60,0.18);  
  }  
  .tap-sound-btn:hover{  
    border-color: rgba(255,0,60,0.55);  
    box-shadow:0 0 28px rgba(255,0,60,0.28);  
  }  
  .tap-sound-btn:active{ transform:scale(0.99); }  
  
  /* Persona 5 style outro */  
  .intro-outro{  
    position:absolute;  
    inset:0;  
    pointer-events:none;  
    opacity:0;  
    z-index:6;  
  }  
  .intro.outro .intro-outro{  
    opacity:1;  
    animation:p5Outro 820ms ease forwards;  
  }  
  .intro-outro::before{  
    content:"";  
    position:absolute;  
    inset:-20%;  
    background:  
      radial-gradient(circle at 35% 55%, rgba(255,0,60,0.65), rgba(0,0,0,0) 55%),  
      linear-gradient(135deg, rgba(255,0,60,0.15), rgba(0,0,0,0) 60%);  
    mix-blend-mode:screen;  
    opacity:0;  
    animation:p5Flash 820ms ease forwards;  
  }  
  .intro-outro::after{  
    content:"";  
    position:absolute;  
    inset:-30%;  
    background: linear-gradient(115deg,  
      rgba(255,255,255,0) 0%,  
      rgba(255,255,255,0) 45%,  
      rgba(255,255,255,0.95) 50%,  
      rgba(255,255,255,0) 56%,  
      rgba(255,255,255,0) 100%);  
    transform:translateX(-70%) rotate(-8deg);  
    opacity:0.85;  
    filter: blur(0.2px);  
    animation:p5Slash 820ms cubic-bezier(.2,.9,.2,1) forwards;  
  }  
  @keyframes p5Flash{  
    0%{ opacity:0; transform:scale(1); }  
    18%{ opacity:1; transform:scale(1.02); }  
    55%{ opacity:0.15; transform:scale(1.05); }  
    100%{ opacity:0; transform:scale(1.08); }  
  }  
  @keyframes p5Slash{  
    0%{ transform:translateX(-75%) rotate(-10deg); }  
    40%{ transform:translateX(15%) rotate(-8deg); }  
    100%{ transform:translateX(85%) rotate(-6deg); }  
  }  
  @keyframes p5Outro{  
    0%{ opacity:0; }  
    10%{ opacity:1; }  
    70%{ opacity:1; }  
    100%{ opacity:0; }  
  }  
  
  /* HERO */  
  .hero{  
    position:relative;  
    min-height:100svh;  
    min-height:100dvh;  
    display:flex;  
    flex-direction:column;  
    justify-content:center;  
    align-items:center;  
    padding:20px;  
    overflow:hidden;  
  }  
  .title{  
    font-size:clamp(50px,7vw,110px);  
    font-weight:800;  
    letter-spacing:6px;  
    margin:0;  
    text-transform:uppercase;  
    text-shadow:0 15px 40px rgba(0,0,0,0.8);  
    z-index:2;  
  }  
  .subtitle{  
    margin-top:20px;  
    font-size:20px;  
    color:rgba(255,255,255,0.85);  
    max-width:900px;  
    z-index:2;  
  }  
  .button{  
    margin-top:40px;  
    padding:16px 45px;  
    background:var(--p5-red);  
    color:#fff;  
    text-decoration:none;  
    border-radius:12px;  
    font-weight:700;  
    transition:0.3s ease;  
    box-shadow:0 0 30px rgba(255,0,60,0.5);  
    display:inline-block;  
    z-index:2;  
  }  
  .button:hover{  
    transform:scale(1.07);  
    box-shadow:0 0 45px rgba(255,0,60,0.8);  
    background:var(--p5-red2);  
  }  
  
  .character{  
    position:absolute;  
    bottom:0;  
    max-height:95vh;  
    z-index:1;  
    pointer-events:none;  
  }  
  .joker{  
    left:-60px;  
    transform:scaleX(-1) rotate(-6deg);  
    filter:drop-shadow(0 0 30px rgba(0,140,255,0.6)) drop-shadow(0 0 70px rgba(0,140,255,0.3));  
  }  
  .sumire{  
    right:-40px;  
    transform:rotate(6deg);  
    filter:
  drop-shadow(0 0 30px rgba(255,0,60,0.6))
  drop-shadow(0 0 70px rgba(255,0,60,0.3)); 
  }  
  
  /* PORTFOLIO */  
  .portfolio{  
    padding:110px 20px 80px;  
    background:rgba(0,0,0,0.90);  
  }  
  .section-title{  
    font-size:clamp(32px,4vw,56px);  
    font-weight:800;  
    margin-bottom:40px;  
  }  
  .video-grid{  
    max-width:2800px;  
    margin:0 auto;  
    display:grid;  
    grid-template-columns:repeat(auto-fit,minmax(260px,1fr));  
    gap:56px;  
  }  
  .video-card{  
    border-radius:18px;  
    overflow:hidden;  
    background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(0,0,0,0.55));  
    border: 1px solid rgba(255,255,255,0.10);  
    box-shadow: 0 18px 50px rgba(0,0,0,0.65);  
    transition: transform 0.25s ease, box-shadow 0.25s ease, border-color 0.25s ease;  
    position:relative;  
  }  
  .video-card:hover{  
    transform: translateY(-8px);  
    border-color: rgba(255,0,60,0.35);  
    box-shadow: 0 24px 70px rgba(0,0,0,0.75);  
  }  
  
  /* ===== Persona 5 Custom Player ===== */  
  .p5-player{ position:relative; width:100%; background:#000; display:flex; flex-direction:column; min-height:0; }  
  .p5-video{ width:100%; flex:1; height:100%; object-fit:contain; display:block; background:#000; }  
  
  @media (hover:hover) and (pointer:fine){  
    .p5-player, .p5-player *{ cursor: none !important; }  
    .p5-player:fullscreen, .p5-player:fullscreen *{ cursor: none !important; }  
    .p5-player:-webkit-full-screen, .p5-player:-webkit-full-screen *{ cursor: none !important; }  
  }  
  .p5-player, .p5-video { cursor: crosshair; }  
  
  .p5-player:fullscreen,  
  .p5-player:-webkit-full-screen{  
    width:100vw !important;  
    height:100vh !important;  
    background:#000 !important;  
    border-radius:0 !important;  
  }  
  .p5-player:fullscreen .p5-video,  
  .p5-player:-webkit-full-screen .p5-video{  
    width:100% !important;  
    height:100% !important;  
    object-fit:contain !important;  
    background:#000 !important;  
  }  
  .p5-player:fullscreen .p5-controls,  
  .p5-player:-webkit-full-screen .p5-controls{ left:16px; right:16px; bottom:14px; }  
  
  .p5-gestures{ position:absolute; inset:0; display:flex; z-index:4; pointer-events:auto; }  
  .p5-zone{ flex:1; background:transparent; border:none; padding:0; margin:0; cursor:pointer; -webkit-tap-highlight-color: transparent; }  
  
  .p5-hint{  
    position:absolute;  
    left:50%;  
    top:50%;  
    transform:translate(-50%,-50%);  
    padding:10px 14px;  
    border-radius:14px;  
    background:rgba(0,0,0,0.55);  
    border:1px solid rgba(255,255,255,0.14);  
    font-weight:800;  
    font-size:14px;  
    letter-spacing:0.6px;  
    opacity:0;  
    pointer-events:none;  
    transition: opacity .15s ease, transform .15s ease;  
    z-index:5;  
  }  
  .p5-hint.show{ opacity:1; transform:translate(-50%,-55%); }  
  
  .p5-bigplay{  
    position:absolute;  
    inset:0;  
    margin:auto;  
    width:86px;  
    height:86px;  
    border-radius:18px;  
    border:2px solid rgba(255,255,255,0.25);  
    background:rgba(0,0,0,0.45);  
    cursor:pointer;  
    display:grid;  
    place-items:center;  
    box-shadow:0 0 40px rgba(255,0,60,0.35);  
    transition:0.2s ease;  
    z-index:6;  
  }  
  .p5-bigplay:hover{ transform:scale(1.05); }  
  .p5-bigplay img{ width:34px; height:34px; display:block; }  
  
  .p5-controls{  
    position:absolute;  
    left:12px;  
    right:12px;  
    bottom:10px;  
    display:flex;  
    align-items:center;  
    gap:10px;  
    padding:10px 12px;  
    background:linear-gradient(to top, rgba(0,0,0,0.88), rgba(0,0,0,0.20));  
    z-index:7;  
    box-sizing:border-box;  
    max-width:100%;  
  }  
  .p5-btn{  
    background:#0b0b0b;  
    border:1px solid rgba(255,255,255,0.12);  
    color:#fff;  
    border-radius:10px;  
    padding:8px 10px;  
    cursor:pointer;  
    font-weight:700;  
    display:grid;  
    place-items:center;  
    user-select:none;  
    transition: transform .15s ease, box-shadow .2s ease, border-color .2s ease;  
  }  
  .p5-btn:hover{  
    border-color: rgba(255,0,60,0.55);  
    box-shadow:0 0 22px rgba(255,0,60,0.25);  
    transform: translateY(-1px);  
  }  
  .p5-btn:active{ transform: translateY(0px) scale(0.98); }  
  .p5-icon{ width:18px; height:18px; display:block; }  

  /* ==========================================================
   âœ… DESKTOP ONLY â€” VIDEO PLAYER CONTROLS (ONE VARIABLE)
   Resizes: button box + icon + spacing together
   ========================================================== */
@media (min-width: 769px) and (hover:hover) and (pointer:fine){

  :root{
    --vp-btn: 42px;  /* ðŸ”¥ change ONLY this number */
  }

  /* Optional: scale spacing/padding of the controls row too */
  .p5-player .p5-controls{
    gap: calc(var(--vp-btn) * 0.20);                 /* button spacing */
    padding: calc(var(--vp-btn) * 0.22) calc(var(--vp-btn) * 0.26); /* bar padding */
  }

  /* Button box becomes fixed-size square */
  .p5-player .p5-btn{
    width: var(--vp-btn);
    height: var(--vp-btn);

    padding: 0;           /* important so size is controlled by width/height */
    min-width: 0;
    min-height: 0;

    border-radius: calc(var(--vp-btn) * 0.28);

    display: grid;
    place-items: center;
  }

  /* Icon scales with the button */
  .p5-player .p5-icon{
    width: calc(var(--vp-btn) * 0.55);
    height: calc(var(--vp-btn) * 0.55);
  }

  /* Optional: make time text scale slightly with the button size */
  .p5-player .p5-time{
    font-size: calc(var(--vp-btn) * 0.28);
    min-width: calc(var(--vp-btn) * 1.2);
  }

  /* Optional: make the slider height scale a bit */
  .p5-player .p5-progress{
    height: calc(var(--vp-btn) * 0.14);
  }
  .p5-player .p5-progress::-webkit-slider-thumb{
    width: calc(var(--vp-btn) * 0.33);
    height: calc(var(--vp-btn) * 0.33);
  }

}
  .p5-time{ min-width:54px; font-size:12px; opacity:0.9; }  
  .p5-progress{  
    flex:1;  
    min-width:0;  
    height:6px;  
    -webkit-appearance:none;  
    appearance:none;  
    background:rgba(255,0,60,0.22);  
    border-radius:999px;  
    outline:none;  
  }  
  .p5-progress::-webkit-slider-thumb{  
    -webkit-appearance:none;  
    appearance:none;  
    width:14px;  
    height:14px;  
    border-radius:999px;  
    background:var(--p5-red);  
    box-shadow:0 0 20px rgba(255,0,60,0.7);  
    cursor:pointer;  
  }  
  
  .video-label{  
    padding: 12px 14px;  
    text-align:left;  
    font-size: 14px;  
    letter-spacing: 0.5px;  
    color: rgba(255,255,255,0.88);  
    border-top: 1px solid rgba(255,255,255,0.08);  
    background: rgba(0,0,0,0.35);  
  }  
  .video-label span{  
    color: rgba(255,255,255,0.65);  
    font-size: 12px;  
    display:block;  
    margin-top:4px;  
  }  
  
  /* CONTACT (same as before, trimmed for brevity) */  
  .contact{ padding:110px 20px 120px; background: rgba(0,0,0,0.92); }  
  .contact-wrap{ max-width:1100px; margin:0 auto; border-radius:26px; position:relative; overflow:hidden; padding:0; }  
  .contact-wrap::before{  
    content:""; position:absolute; inset:0; border-radius:26px; padding:2px;  
    background: linear-gradient(180deg, rgba(255,0,60,1), rgba(255,0,60,0.35));  
    -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);  
    -webkit-mask-composite: xor; mask-composite: exclude;  
    box-shadow: 0 0 28px rgba(255,0,60,0.35), 0 0 70px rgba(255,0,60,0.18);  
    pointer-events:none; z-index:1;  
  }  
  .contact-inner{  
    position:relative; z-index:2; border-radius:26px; padding:34px 30px;  
    background:  
      radial-gradient(circle at 30% 30%, rgba(255,0,60,0.22), rgba(0,0,0,0) 55%),  
      radial-gradient(circle at 70% 65%, rgba(255,255,255,0.08), rgba(0,0,0,0) 55%),  
      linear-gradient(180deg, rgba(12,12,16,0.92), rgba(0,0,0,0.85));  
    border:1px solid rgba(255,255,255,0.08);  
    box-shadow: 0 30px 90px rgba(0,0,0,0.7);  
  }  
  .contact-kicker{ margin:0 0 10px; letter-spacing:1px; opacity:0.9; font-weight:800; text-transform:uppercase; font-size:14px; color: rgba(255,255,255,0.78); }  
  .contact-title{ margin:0; font-weight:900; letter-spacing:2px; text-transform:uppercase; font-size:clamp(34px,4.6vw,64px); text-shadow:0 12px 34px rgba(0,0,0,0.7); }  
  .contact-sub{ margin:14px auto 0; max-width:820px; opacity:0.82; line-height:1.55; font-size:14px; }  
  .contact-row{ margin-top:26px; display:flex; align-items:center; justify-content:space-between; gap:22px; flex-wrap:wrap; }  
  .contact-profile{ display:flex; align-items:center; gap:18px; text-align:left; min-width:260px; }  
  .pfp-ring{  
    width:98px; height:98px; border-radius:50%; padding:4px;  
    background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.22), rgba(255,255,255,0) 45%);  
    border:2px solid rgba(255,0,60,0.95);  
    box-shadow: 0 0 26px rgba(255,0,60,0.45), 0 0 65px rgba(255,0,60,0.22);  
    animation:pfpPulse 2.6s ease-in-out infinite;  
    flex:0 0 auto;  
  }  
  @keyframes pfpPulse{  
    0%,100%{ transform: translateY(0); box-shadow:0 0 26px rgba(255,0,60,0.45),0 0 65px rgba(255,0,60,0.22); }  
    50%{ transform: translateY(-2px); box-shadow:0 0 36px rgba(255,0,60,0.70),0 0 85px rgba(255,0,60,0.32); }  
  }  
  .pfp-img{ width:100%; height:100%; border-radius:50%; object-fit:cover; display:block; box-shadow: inset 0 0 0 1px rgba(255,255,255,0.06); }  
  .contact-name{ margin:0; font-weight:900; font-size:20px; letter-spacing:0.6px; }  
  .contact-note{ margin:6px 0 0; font-size:13px; opacity:0.85; }  
  .contact-actions{ display:flex; gap:14px; flex-wrap:wrap; justify-content:flex-end; margin-left:auto; }  
  .contact-btn{  
    display:inline-flex; align-items:center; gap:12px; padding:14px 18px; border-radius:16px;  
    text-decoration:none; font-weight:900; letter-spacing:0.4px; color:#fff;  
    background: rgba(0,0,0,0.55); border:1px solid rgba(255,255,255,0.14);  
    box-shadow: 0 0 24px rgba(255,0,60,0.18), inset 0 0 0 1px rgba(255,255,255,0.04);  
    position:relative; overflow:hidden;  
    transition: transform .18s ease, box-shadow .2s ease, border-color .2s ease;  
  }  
  .contact-btn:hover{ transform: translateY(-3px) scale(1.02); border-color: rgba(255,0,60,0.60);  
    box-shadow: 0 0 36px rgba(255,0,60,0.34), 0 0 80px rgba(255,0,60,0.12), inset 0 0 0 1px rgba(255,255,255,0.05);  
  }  
  .btn-ico{ width:22px; height:22px; display:block; filter:drop-shadow(0 0 8px rgba(255,0,60,0.30)) drop-shadow(0 0 18px rgba(255,0,60,0.22)); }  
  
  footer{ padding:50px 20px; font-size:14px; background:rgba(0,0,0,0.92); opacity:0.9; }  
  
  /* =========================  
     âœ… BIG P5 HERO MUSIC PLAYER (TOP BAR)  
     - fixed at top  
     - ONLY shows when music is playing  
     ========================= */  
  .p5-music-hero{  
    position:fixed;  
    top:calc(12px + env(safe-area-inset-top));  
    left:50%;  
    transform:translateX(-50%) translateY(10px);  
  
    width:min(760px, calc(100% - 18px));  
    z-index:99998;  
  
    opacity:0;  
    pointer-events:none;  
    transition: opacity .55s ease, transform .55s ease;  
  }  
  .p5-music-hero.show{  
    opacity:1;  
    transform:translateX(-50%) translateY(0);  
    pointer-events:auto;  
  }  
  .p5-music-hero.hide{  
    opacity:0;  
    transform:translateX(-50%) translateY(10px);  
    pointer-events:none;  
  }  
  
  .p5-music-frame{  
    display:flex;  
    gap:18px;  
    align-items:stretch;  
  
    padding:16px;  
    border-radius:26px;  
  
    background:  
      radial-gradient(circle at 18% 35%, rgba(255,0,60,0.18), rgba(0,0,0,0) 52%),  
      radial-gradient(circle at 72% 60%, rgba(255,255,255,0.06), rgba(0,0,0,0) 55%),  
      linear-gradient(180deg, rgba(12,12,16,0.86), rgba(0,0,0,0.72));  
  
    border:1px solid rgba(255,255,255,0.10);  
    box-shadow:  
      0 30px 90px rgba(0,0,0,0.65),  
      0 0 45px rgba(255,0,60,0.12);  
    backdrop-filter: blur(8px);  
  }  
  
  .p5-music-left{ display:flex; align-items:center; justify-content:center; }  
  .p5-cover-wrap{  
    position:relative;  
    width:122px; height:122px;  
    border-radius:22px;  
    overflow:hidden;  
    border:2px solid rgba(255,0,60,0.65);  
    box-shadow: 0 0 26px rgba(255,0,60,0.30);  
  }  
  .p5-cover{  
    width:100%; height:100%;  
    object-fit:cover;  
    display:block;  
    transform: scale(1.02);  
  }  
  .p5-cover-glow{  
    position:absolute; inset:-40%;  
    background: radial-gradient(circle at 30% 30%, rgba(255,0,60,0.55), rgba(0,0,0,0) 55%);  
    mix-blend-mode:screen;  
    opacity:0.35;  
    pointer-events:none;  
  }  
  
  .p5-music-right{ flex:1; min-width:0; display:flex; flex-direction:column; gap:10px; }  
  
  .p5-music-top{  
    display:flex;  
    align-items:center;  
    justify-content:space-between;  
    gap:14px;  
  }  
  .p5-track-meta{ text-align:left; min-width:0; }  
  .p5-track-kicker{  
    font-weight:900;  
    letter-spacing:1px;  
    text-transform:uppercase;  
    font-size:12px;  
    opacity:0.85;  
  }  
  /* âœ… Title container (viewport with soft fade edges) */
/* =========================================
   SMART MARQUEE TITLE (Desktop + Mobile)
   ========================================= */

.p5-track-title{  
  margin-top:4px;  
  font-weight:900;  
  font-size:16px;  
  letter-spacing:.3px;  
  position:relative;
  overflow:hidden;
  white-space:nowrap;
  max-width:100%;
}

.p5-track-title .marquee{
  display:inline-block;
  white-space:nowrap;
  transform:translateX(0);
  opacity:1;
  will-change:transform, opacity;
}

.p5-track-title.animate .marquee{
  animation: p5SmartMarquee var(--marquee-speed, 12s) linear infinite;
}

@keyframes p5SmartMarquee{
  0%   { transform:translateX(0); opacity:1; }
  70%  { transform:translateX(calc(-1 * var(--marquee-distance))); opacity:1; }
  85%  { transform:translateX(calc(-1 * var(--marquee-distance) - 20px)); opacity:0; }
  86%  { transform:translateX(100%); opacity:0; }
  100% { transform:translateX(0); opacity:1; }
}
  /* =========================================
   Desktop: Fade edges ONLY while animating
   ========================================= */

@media (hover:hover) and (pointer:fine){

  .p5-track-title.animate{
    -webkit-mask-image: linear-gradient(
      90deg,
      transparent 0%,
      #000 8%,
      #000 92%,
      transparent 100%
    );
    mask-image: linear-gradient(
      90deg,
      transparent 0%,
      #000 8%,
      #000 92%,
      transparent 100%
    );
  }

}
  
.p5-track-artist{  
  margin-top:4px;  
  font-weight:700;  
  font-size:12px;  
  opacity:0.75;  
  letter-spacing:.25px;  
  white-space:nowrap;  
  overflow:hidden;  
  text-overflow:ellipsis;  
}  
  
  .p5-top-actions{  
    display:flex;  
    align-items:center;  
    gap:10px;  
    flex:0 0 auto;  
  }  
  
  .p5-mbtn{  
    background:#0b0b0b;  
    border:1px solid rgba(255,255,255,0.12);  
    color:#fff;  
    border-radius:14px;  
    padding:10px 12px;  
    cursor:pointer;  
    font-weight:900;  
    transition: transform .15s ease, box-shadow .2s ease, border-color .2s ease, opacity .2s ease;  
    user-select:none;  
  }  
  .p5-mbtn:hover{  
    border-color: rgba(255,0,60,0.60);  
    box-shadow:0 0 24px rgba(255,0,60,0.22);  
    transform: translateY(-1px);  
  }  
  .p5-mbtn:active{ transform: translateY(0) scale(0.98); }  
  .p5-mbtn.active{  
    border-color: rgba(255,0,60,0.85);  
    box-shadow:0 0 30px rgba(255,0,60,0.30);  
  }  
  
  .p5-ico{  
  width:18px;  
  height:18px;  
  display:block;  
}  
  
  .p5-vol-box{  
  display:flex;  
  align-items:center;  
  gap:10px;  
}  
  .p5-vol-btn{  
    background: rgba(140,0,25,0.55);  
    border-color: rgba(255,0,60,0.50);  
  }  
  .p5-vol-btn:hover{  
    border-color: rgba(255,0,60,0.95);  
    box-shadow:0 0 30px rgba(255,0,60,0.35);  
  }  
  
  .p5-vol-slider{  
  width:150px;  
  height:8px;  
  -webkit-appearance:none;  
  appearance:none;  
  border-radius:999px;  
  outline:none;  
  background: rgba(255,0,60,0.25);  
}  
  .p5-vol-slider::-webkit-slider-thumb{  
    -webkit-appearance:none;  
    appearance:none;  
    width:18px;  
    height:18px;  
    border-radius:999px;  
    background:#fff;  
    box-shadow: 0 0 22px rgba(255,255,255,0.35), 0 0 28px rgba(255,0,60,0.25);  
    cursor:pointer;  
  }  
  
  .p5-music-mid{  
    display:flex;  
    align-items:center;  
    justify-content:center;  
    gap:14px;  
    margin-top:2px;  
  }  
  .p5-skip{ padding:10px 14px; }  
  
  .p5-playhero{  
    width:58px;  
    height:58px;  
    border-radius:18px;  
    border:2px solid rgba(255,255,255,0.20);  
    background: rgba(0,0,0,0.50);  
    box-shadow: 0 0 40px rgba(255,0,60,0.26);  
    display:grid;  
    place-items:center;  
    cursor:pointer;  
    transition: transform .18s ease, box-shadow .2s ease, border-color .2s ease;  
  }  
  .p5-playhero:hover{  
    transform: scale(1.04);  
    border-color: rgba(255,0,60,0.65);  
    box-shadow: 0 0 54px rgba(255,0,60,0.34);  
  }  
  .p5-playhero:active{ transform: scale(0.99); }  
  .p5-playhero img{ width:26px; height:26px; display:block; }  
  
  .p5-music-bottom{ display:flex; flex-direction:column; gap:8px; }  
  .p5-time-row{  
    display:flex;  
    justify-content:space-between;  
    opacity:0.9;  
    font-size:12px;  
    font-weight:800;  
  }  
  
  .p5-seek{  
    width:100%;  
    height:8px;  
    -webkit-appearance:none;  
    appearance:none;  
    border-radius:999px;  
    outline:none;  
    background: rgba(255,0,60,0.22);  
    transition: background .12s linear;  
  }  
  .p5-seek::-webkit-slider-thumb{  
    -webkit-appearance:none;  
    appearance:none;  
    width:18px;  
    height:18px;  
    border-radius:999px;  
    background: var(--p5-red);  
    box-shadow: 0 0 22px rgba(255,0,60,0.55);  
    cursor:pointer;  
  }  
  
  /* âœ… remove the old dock entirely */  
  .music-dock{ display:none !important; }  
  
  @media (max-width:768px){  
    .hero{ min-height:92svh; min-height:92dvh; }  
    .title{font-size:38px;letter-spacing:3px;}  
    .subtitle{font-size:15px;max-width:320px;}  
    .button{padding:14px 28px;}  
    .joker{display:none;}  
    .sumire{right:-120px;max-height:85vh;}  
  
    .p5-controls{ left:14px; right:14px; flex-wrap:wrap; row-gap:8px; padding:12px 12px; }  
    .p5-btn{ padding:10px 12px; min-width:42px; min-height:42px; border-radius:12px; font-size:16px; }  
    .p5-progress{ flex: 1 1 100%; height:8px; }  
    .p5-progress::-webkit-slider-thumb{ width:18px; height:18px; }  
    .p5-time{ min-width:auto; }  
  }  
 /* ==========================================================
   âœ… MOBILE HERO MUSIC BAR + EDITOR VARS
   ========================================================== */
@media (max-width: 820px) {

  :root{
    /* size */
    --m-player-width: min(92vw, 420px);
    --m-player-top: calc(8px + env(safe-area-inset-top));

    --m-frame-h: 85px;            /* bar height */
    --m-pad-y: 8px;
    --m-pad-x: 12px;
    --m-radius: 22px;
    --m-gap: 10px;

    --m-cover: 54px;
    
    --m-title: 11px;
    --m-artist: 9px;
    --m-time: 10px;

    --m-icon: 8px;
    --m-btn-pad-y: 6px;
    --m-btn-pad-x: 8px;
    --m-btn-radius: 12px;

    --m-play: 33px;
    --m-play-icon: 16px;

    --m-vol-w: 88px;
    --m-vol-h: 6px;
    --m-vol-thumb: 14px;

    --m-seek-h: 6px;
    --m-seek-thumb: 14px;
    --m-seek-w: 132%;

    /* MOVE EVERYTHING (X/Y offsets) */
    --m-frame-x: 0px;
    --m-frame-y: 0px;

    --m-cover-x: 0px;
    --m-cover-y: -25px;

    --m-meta-x: 0px;
    --m-meta-y: 0px;

    --m-actions-x: 10px;
    --m-actions-y: -5px;

    --m-mid-x: 0px;
    --m-mid-y: 0px;

    --m-bottom-x: -65px;
    --m-bottom-y: -14px;
  }

  .p5-music-hero{
    width: var(--m-player-width) !important;
    top: var(--m-player-top) !important;
    transform: translateX(-50%) translate(var(--m-frame-x), var(--m-frame-y)) !important;
  }

  .p5-music-frame{
    position: relative !important;
    height: var(--m-frame-h) !important;
    padding: var(--m-pad-y) var(--m-pad-x) !important;
    border-radius: var(--m-radius) !important;

    display: grid !important;
    grid-template-columns: var(--m-cover) 1fr auto !important;
    grid-template-rows: auto auto !important;
    grid-template-areas:
      "cover meta right"
      "cover bottom right" !important;

    align-items: center !important;
    gap: var(--m-gap) !important;
    overflow: hidden !important;
  }

  /* cover */
  .p5-music-left{ grid-area: cover !important; }
  .p5-cover-wrap{
    width: var(--m-cover) !important;
    height: var(--m-cover) !important;
    border-radius: 16px !important;
    transform: translate(var(--m-cover-x), var(--m-cover-y)) !important;
  }

  /* hide kicker */
  .p5-track-kicker{ display:none !important; }

  /* meta */
  .p5-music-top{
    grid-area: meta !important;
    margin: 0 !important;
    display: block !important;
    transform: translate(var(--m-meta-x), var(--m-meta-y)) !important;
  }
  .p5-track-title{
    font-size: var(--m-title) !important;
    line-height: 1.1 !important;
    font-weight: 900 !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    -webkit-mask-image: none !important;
    mask-image: none !important;
  }
  
  .p5-track-artist{
    font-size: var(--m-artist) !important;
    line-height: 1.1 !important;
    font-weight: 700 !important;
    opacity: .85 !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    margin-top: 2px !important;
  }

  /* right side */
  .p5-top-right{
    grid-area: right !important;
    display: flex !important;
    flex-direction: column !important;
    align-items: flex-end !important;
    gap: 6px !important;
    transform: translate(var(--m-actions-x), var(--m-actions-y)) !important;
  }

  .p5-actions-row{
    display: flex !important;
    gap: 6px !important;
    justify-content: flex-end !important;
  }

  /* buttons */
  .p5-mbtn{
    padding: var(--m-btn-pad-y) var(--m-btn-pad-x) !important;
    border-radius: var(--m-btn-radius) !important;
  }
  .p5-ico{
    width: var(--m-icon) !important;
    height: var(--m-icon) !important;
  }

  /* volume slider */
  .p5-vol-slider{
    width: var(--m-vol-w) !important;
    height: var(--m-vol-h) !important;
    -webkit-appearance:none !important;
    appearance:none !important;
    touch-action: pan-x !important;
  }
  .p5-vol-slider::-webkit-slider-thumb{
    -webkit-appearance:none !important;
    appearance:none !important;
    width: var(--m-vol-thumb) !important;
    height: var(--m-vol-thumb) !important;
    border-radius: 999px !important;
  }

  /* mid overlay (prev play next) */
  .p5-music-mid{
    position: absolute !important;
    left: 50% !important;
    top: 50% !important;
    transform: translate(-50%, -40%) translate(var(--m-mid-x), var(--m-mid-y)) !important;
    display: flex !important;
    gap: 10px !important;
    align-items: center !important;
    justify-content: center !important;
    margin: 0 !important;
    z-index: 5 !important;
  }

  .p5-playhero{
    width: var(--m-play) !important;
    height: var(--m-play) !important;
    border-radius: 14px !important;
  }
  .p5-playhero img{
    width: var(--m-play-icon) !important;
    height: var(--m-play-icon) !important;
  }

  /* bottom */
  .p5-music-bottom{
    grid-area: bottom !important;
    display: flex !important;
    flex-direction: column !important;
    gap: 4px !important;
    margin: 0 !important;
    align-items: flex-start !important;
    transform: translate(var(--m-bottom-x), var(--m-bottom-y)) !important;
  }

  .p5-time-row{
    font-size: var(--m-time) !important;
    font-weight: 800 !important;
    opacity: .9 !important;
    justify-content: flex-start !important;
  }
  #p5Dur::before{
    content: " / " !important;
    opacity: .9 !important;
  }

  .p5-seek{
    width: var(--m-seek-w) !important;
    height: var(--m-seek-h) !important;
    -webkit-appearance:none !important;
    appearance:none !important;
    touch-action: pan-x !important;
  }
  .p5-seek::-webkit-slider-thumb{
    -webkit-appearance:none !important;
    appearance:none !important;
    width: var(--m-seek-thumb) !important;
    height: var(--m-seek-thumb) !important;
    border-radius: 999px !important;
  }
}

/* ==========================================================
   âœ… EDITOR PANEL UI (works on all screens)
   ========================================================== */
.p5-layout-panel{
  position: fixed;
  left: 10px;
  bottom: calc(10px + env(safe-area-inset-bottom));
  z-index: 2147483646;
  width: min(92vw, 380px);
  background: rgba(0,0,0,0.78);
  border: 1px solid rgba(255,255,255,0.16);
  border-radius: 16px;
  padding: 12px;
  display: none;
  backdrop-filter: blur(8px);
  color:#fff;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}
body.p5-layout-edit .p5-layout-panel{ display:block; }
  /* Hide editor while intro is active */
body.intro-active #p5EditorToggle,
body.intro-active #p5LayoutPanel,
body.intro-active #p5EditorToggleDesktop,
body.intro-active #p5LayoutPanelDesktop{
  display: none !important;
  pointer-events: none !important;
}
  
  /* ===== Mobile Editor Toggle Button ===== */
.p5-editor-toggle{
  position: fixed;
  left: 12px;
  bottom: calc(12px + env(safe-area-inset-bottom));
  z-index: 2147483647;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.18);
  background: rgba(0,0,0,0.75);
  color: #fff;
  font-weight: 900;
  display: none;
  -webkit-tap-highlight-color: transparent;
}

/* default: hidden */
.p5-editor-toggle{ display:none; }

/* show on ANY touch device */
@media (pointer: coarse), (hover: none) {
  .p5-editor-toggle{ display:block; }
}

/* hide on real desktop mouse */
@media (hover:hover) and (pointer:fine){
  .p5-editor-toggle{ display:none; }
}
  /* âœ… Mobile: Editor button bottom-center */
@media (max-width: 820px) and (hover: none) and (pointer: coarse) {
  .p5-editor-toggle{
    left: 50% !important;
    right: auto !important;
    bottom: calc(24px + env(safe-area-inset-bottom)) !important; /* your -24 request */
    transform: translateX(-50%) !important;
    display: block;
  }
}
  /* ==========================================================
   âœ… DESKTOP HERO MUSIC BAR VARS (SEPARATE FROM MOBILE)
   Only applies on real desktop (mouse/trackpad)
   ========================================================== */
@media (min-width: 821px) and (hover:hover) and (pointer:fine){

  :root{
    --d-player-width: 760px;
    --d-player-top: calc(12px + env(safe-area-inset-top));

    --d-frame-h: 105px;
    --d-cover: 122px;
    --d-title: 16px;
    --d-artist: 12px;
    --d-vol-w: 111px;

    --d-frame-x: 0px;
    --d-frame-y: 0px;

    --d-cover-x: 0px;
    --d-cover-y: 0px;

    --d-meta-x: 0px;
    --d-meta-y: 0px;

    --d-actions-x: 0px;
    --d-actions-y: -20px;

    --d-mid-x: 250px;
    --d-mid-y: 0px;

    --d-bottom-x: 0px;
    --d-bottom-y: -58px;
  }

  .p5-music-hero{
    width: min(var(--d-player-width), calc(100% - 18px)) !important;
    top: var(--d-player-top) !important;
    transform: translateX(-50%) translate(var(--d-frame-x), var(--d-frame-y)) !important;
  }

  .p5-music-frame{
    height: var(--d-frame-h) !important;
  }

  .p5-cover-wrap{
    width: var(--d-cover) !important;
    height: var(--d-cover) !important;
    transform: translate(var(--d-cover-x), var(--d-cover-y)) !important;
  }

  .p5-track-title{
    font-size: var(--d-title) !important;
    transform: translate(var(--d-meta-x), var(--d-meta-y)) !important;
  }

  .p5-track-artist{
    font-size: var(--d-artist) !important;
    transform: translate(var(--d-meta-x), var(--d-meta-y)) !important;
  }

  .p5-top-right{
    transform: translate(var(--d-actions-x), var(--d-actions-y)) !important;
  }

  .p5-music-mid{
    transform: translate(-50%, -50%) translate(var(--d-mid-x), var(--d-mid-y)) !important;
  }

  .p5-music-bottom{
    transform: translate(var(--d-bottom-x), var(--d-bottom-y)) !important;
  }

  .p5-vol-slider{
    width: var(--d-vol-w) !important;
  }
}

/* ==========================================================
   âœ… DESKTOP EDITOR TOGGLE BUTTON
   ========================================================== */
.p5-editor-toggle-desktop{
  position: fixed;
  right: 12px;
  bottom: 12px;
  z-index: 2147483647;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.18);
  background: rgba(0,0,0,0.75);
  color: #fff;
  font-weight: 900;
  display: none;
  -webkit-tap-highlight-color: transparent;
}

@media (hover:hover) and (pointer:fine){
  .p5-editor-toggle-desktop{ display:block; }
}
@media (pointer: coarse), (hover:none){
  .p5-editor-toggle-desktop{ display:none; }
}

body.p5-layout-edit-desktop #p5LayoutPanelDesktop{
  display:block;
}


.p5-layout-panel h3{ margin:0 0 10px; font-size:14px; font-weight:900; }
.p5-layout-row{
  display:grid;
  grid-template-columns: 1fr 74px;
  gap: 10px;
  align-items:center;
  margin: 8px 0;
}
.p5-layout-row label{ font-size: 12px; opacity:.9; }
.p5-layout-row input[type="number"]{
  width: 74px;
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.14);
  color:#fff;
  border-radius: 10px;
  padding: 6px 8px;
}
.p5-layout-actions{ display:flex; gap: 10px; margin-top: 10px; }
.p5-layout-actions button{
  flex:1;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.18);
  background: rgba(255,0,60,0.35);
  color:#fff;
  font-weight: 900;
  padding: 10px 10px;
}
.p5-layout-actions button.secondary{ background: rgba(255,255,255,0.08); }
  
  /* âœ… Make the editor panel usable on phones */
.p5-layout-panel{
  width: min(92vw, 320px);
  overflow: auto;
  -webkit-overflow-scrolling: touch;
  max-height: 70vh;
  overscroll-behavior: contain;
}
/* keep buttons visible while scrolling */
.p5-layout-actions{
  position: sticky;
  bottom: 0;
  background: rgba(0,0,0,0.85);
  padding-top: 10px;
}
  /* =========================
   âœ… AE UI STYLES (ADD THIS BELOW your existing .p5-layout-panel styles)
   ========================= */

.ae-group{
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: 14px;
  overflow: hidden;
  margin: 10px 0 12px;
  background: rgba(0,0,0,0.35);
}

.ae-group-title{
  padding: 10px 12px;
  font-weight: 900;
  font-size: 12px;
  letter-spacing: .5px;
  text-transform: uppercase;
  opacity: .92;
  background: rgba(255,255,255,0.06);
  border-bottom: 1px solid rgba(255,255,255,0.08);
}

.ae-row{
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 10px;
  align-items: center;
  padding: 10px 12px;
  border-bottom: 1px solid rgba(255,255,255,0.06);
}
.ae-row:last-child{ border-bottom: 0; }

.ae-label{
  font-size: 12px;
  font-weight: 800;
  opacity: .9;
}

.ae-fields{
  display:flex;
  align-items:center;
  gap:8px;
}

.ae-fields input{
  width: 86px;
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.14);
  color:#fff;
  border-radius: 10px;
  padding: 6px 8px;
  font-weight: 900;
  outline: none;
}

.ae-unit{
  font-size: 11px;
  opacity: .75;
  font-weight: 900;
}

/* blocks (collapsible like AE) */
.ae-block{
  border-top: 1px solid rgba(255,255,255,0.08);
  background: rgba(0,0,0,0.20);
}
.ae-block:first-child{ border-top:0; }

.ae-summary{
  list-style:none;
  cursor:pointer;
  padding: 10px 12px;
  display:flex;
  align-items:center;
  gap:10px;
  user-select:none;
  font-weight: 900;
  font-size: 12px;
}
.ae-summary::-webkit-details-marker{ display:none; }

.ae-twisty{
  width: 18px;
  display:inline-grid;
  place-items:center;
  opacity:.85;
}

details[open] .ae-twisty{ transform: rotate(0deg); }
details:not([open]) .ae-twisty{ transform: rotate(-90deg); }

.ae-name{
  opacity:.95;
}

.ae-xy{
  padding: 10px 12px 12px;
  display:grid;
  gap:10px;
}

.ae-xy-label{
  font-size: 12px;
  opacity: .85;
  font-weight: 900;
}

.ae-xy-fields{
  display:grid;
  gap:10px;
}

.ae-field{
  display:grid;
  grid-template-columns: 18px 1fr auto;
  gap: 8px;
  align-items:center;
}

.ae-axis{
  font-size: 12px;
  font-weight: 1000;
  opacity: .9;
  text-align:center;
  color: rgba(255,255,255,0.92);
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: 8px;
  padding: 6px 0;
}

/* input in XY */
.ae-field input{
  width: 100%;
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.14);
  color:#fff;
  border-radius: 10px;
  padding: 7px 8px;
  font-weight: 900;
  outline:none;
}

/* keep action buttons consistent */
.p5-layout-actions{
  position: sticky;
  bottom: 0;
  background: rgba(0,0,0,0.88);
  padding-top: 10px;
}
  
</style>  </head>  <body oncontextmenu="return false;">  <!-- âœ… BIG P5 HERO MUSIC PLAYER (MOVED TO TOP OF BODY) -->  <div id="p5MusicHero" class="p5-music-hero" data-cursor="normal" aria-live="polite">  
  <div class="p5-music-frame">  
    <div class="p5-music-left">  
      <div class="p5-cover-wrap">  
        <img id="p5Cover" class="p5-cover" src="cover1.jpg" alt="Cover">  
        <div class="p5-cover-glow" aria-hidden="true"></div>  
      </div>  
    </div>  <div class="p5-music-right">  
  <div class="p5-music-top">  
    <div class="p5-track-meta">  
      <div class="p5-track-kicker">Now Playing</div>  
      <div id="p5TrackTitle" class="p5-track-title">â€”</div>  
      <div id="p5TrackArtist" class="p5-track-artist">â€”</div>  
    </div>  

    <div class="p5-top-actions p5-top-right">

  <!-- volume on top -->
  <input id="p5Volume" class="p5-vol-slider" type="range"
         min="0" max="1" step="0.01" value="0.5"
         aria-label="Volume">

  <!-- shuffle/loop/mute under volume -->
  <div class="p5-actions-row">
    <button id="p5Shuffle" class="p5-mbtn" type="button" aria-label="Shuffle">
      <img src="shuffle-icon.png" class="p5-ico" alt="">
    </button>

    <button id="p5Loop" class="p5-mbtn" type="button" aria-label="Loop">
      <img src="loop-icon.png" class="p5-ico" alt="">
    </button>

    <button id="p5Mute" class="p5-mbtn p5-vol-btn" type="button" aria-label="Mute/unmute">
      <img id="p5VolIcon" class="p5-ico" src="volume on.png" alt="">
    </button>
  </div>

</div>
  </div>  

  <div class="p5-music-mid">  
    <button id="p5Prev" class="p5-mbtn p5-skip" type="button" data-cursor="link" aria-label="Previous">  
      <img src="prev-icon.png" class="p5-ico" alt="">  
    </button>  

    <button id="p5Play" class="p5-playhero" type="button" data-cursor="link" aria-label="Play/Pause">  
      <img id="p5PlayIcon" src="start.png" alt="Play">  
    </button>  

    <button id="p5Next" class="p5-mbtn p5-skip" type="button" data-cursor="link" aria-label="Next">  
      <img src="next-icon.png" class="p5-ico" alt="">  
    </button>  
  </div>  

  <div class="p5-music-bottom">  
    <div class="p5-time-row">  
      <span id="p5Cur" class="p5-time">0:00</span>  
      <span id="p5Dur" class="p5-time">0:00</span>  
    </div>  

    <input id="p5Seek" class="p5-seek" type="range" min="0" max="100" value="0" step="0.1"  
           data-cursor="h-resize" aria-label="Seek">  
  </div>  
</div>

  </div>  
</div>  <!-- GIF CURSOR -->  <div id="gifCursor" class="gif-cursor" aria-hidden="true">  
  <img id="gifCursorImg" src="NORMAL.gif" alt="">  
</div>  <!-- INTRO -->  <div id="introOverlay" class="intro">  
  <video id="introVideo" autoplay playsinline muted preload="auto">  
    <source src="SUMIRE.webm" type="video/webm">  
  </video>  
  <button id="skipIntro" class="intro-skip" type="button" aria-label="Skip intro" data-cursor="link">Skip</button>  
  <div class="intro-outro" aria-hidden="true"></div>  
  <!-- SOUND BUTTON -->
<div id="tapSoundOverlay" class="tap-sound-overlay" aria-hidden="false">
  <button id="tapSoundBtn" class="tap-sound-btn" type="button" data-cursor="link">Tap to enable sound</button>
 </div>
</div>

  <section class="hero">  
  <img src="joker.png" class="character joker" alt="Joker">  
  <img src="sumire.png" class="character sumire" alt="Sumire">    <h1 class="title">LUVIE EDITS</h1>  
  <p class="subtitle">The Editor That Makes Your Vision Come To Life</p>  
  <a href="#portfolio" class="button" data-cursor="link">Watch My Work</a>  
  <a href="#contact" class="button" style="margin-top:16px;background:rgba(0,0,0,0.55);border:1px solid rgba(255,255,255,0.16);box-shadow:0 0 24px rgba(255,0,60,0.18);" data-cursor="link">Contact Me</a>  
</section>  <section id="portfolio" class="portfolio">  
  <h2 class="section-title">Portfolio</h2>    <div class="video-grid">  
    <!-- CARD 1 -->  
<div class="video-card">    <div class="p5-player" data-cursor="precision">  
    <video class="p5-video" preload="metadata" playsinline>  
      <source src="video1.mp4" type="video/mp4">  
    </video>  <div class="p5-gestures" aria-hidden="true">  
  <button class="p5-zone p5-left" type="button"></button>  
  <button class="p5-zone p5-mid" type="button"></button>  
  <button class="p5-zone p5-right" type="button"></button>  
</div>  

<div class="p5-hint">+10s</div>  

<button class="p5-bigplay" type="button" aria-label="Play" data-cursor="link">  
  <img src="start.png" alt="Play">  
</button>  

<div class="p5-controls" data-cursor="normal">  

  <button class="p5-btn p5-play" type="button" aria-label="Play/Pause" data-cursor="link">  
    <img src="start.png" class="p5-icon" alt="Play">  
  </button>  

  <button class="p5-btn p5-back" type="button" aria-label="Back 10 seconds" data-cursor="link">  
    <img src="fast-backward-icon.png" class="p5-icon" alt="Back 10s">  
  </button>  

  <div class="p5-time">  
    <span class="p5-current">0:00</span>  
  </div>  

  <input class="p5-progress" type="range"  
         min="0" max="100" value="0" step="0.1"  
         aria-label="Seek" data-cursor="h-resize">  

  <button class="p5-btn p5-fwd" type="button" aria-label="Forward 10 seconds" data-cursor="link">  
    <img src="fast-forward-icon.png" class="p5-icon" alt="Forward 10s">  
  </button>  

  <button class="p5-btn p5-vol-down" type="button" aria-label="Volume down" data-cursor="link">  
    <img src="minus-line-icon.png" class="p5-icon" alt="Volume -">  
  </button>  

  <button class="p5-btn p5-mute" type="button" aria-label="Mute" data-cursor="link">  
    <img src="volume on.png" class="p5-icon p5-mute-icon" alt="Unmuted">  
  </button>  

  <button class="p5-btn p5-vol-up" type="button" aria-label="Volume up" data-cursor="link">  
    <img src="plus-icon.png" class="p5-icon" alt="Volume +">  
  </button>  

  <button class="p5-btn p5-full" type="button" aria-label="Fullscreen" data-cursor="link">  
    <img src="expand-icon.png" class="p5-icon p5-full-icon" alt="Fullscreen">  
  </button>  

</div> <!-- CLOSE .p5-controls -->

  </div> <!-- CLOSE .p5-player -->    <div class="video-label">  
    Edit 1 <span>Persona-style player</span>  
  </div>  </div> <!-- CLOSE .video-card -->  <!-- CARD 2 -->

   <div class="video-card">    <div class="p5-player" data-cursor="precision">  
    <video class="p5-video" preload="metadata" playsinline>  
      <source src="video2.mp4" type="video/mp4">  
    </video>  <div class="p5-gestures" aria-hidden="true">  
  <button class="p5-zone p5-left" type="button"></button>  
  <button class="p5-zone p5-mid" type="button"></button>  
  <button class="p5-zone p5-right" type="button"></button>  
</div>  

<div class="p5-hint">+10s</div>  

<button class="p5-bigplay" type="button" aria-label="Play" data-cursor="link">  
  <img src="start.png" alt="Play">  
</button>  

<div class="p5-controls" data-cursor="normal">  

  <button class="p5-btn p5-play" type="button" aria-label="Play/Pause" data-cursor="link">  
    <img src="start.png" class="p5-icon" alt="Play">  
  </button>  

  <button class="p5-btn p5-back" type="button" aria-label="Back 10 seconds" data-cursor="link">  
    <img src="fast-backward-icon.png" class="p5-icon" alt="Back 10s">  
  </button>  

  <div class="p5-time">  
    <span class="p5-current">0:00</span>  
  </div>  

  <input class="p5-progress" type="range"  
         min="0" max="100" value="0" step="0.1"  
         aria-label="Seek" data-cursor="h-resize">  

  <button class="p5-btn p5-fwd" type="button" aria-label="Forward 10 seconds" data-cursor="link">  
    <img src="fast-forward-icon.png" class="p5-icon" alt="Forward 10s">  
  </button>  

  <button class="p5-btn p5-vol-down" type="button" aria-label="Volume down" data-cursor="link">  
    <img src="minus-line-icon.png" class="p5-icon" alt="Volume -">  
  </button>  

  <button class="p5-btn p5-mute" type="button" aria-label="Mute" data-cursor="link">  
    <img src="volume on.png" class="p5-icon p5-mute-icon" alt="Unmuted">  
  </button>  

  <button class="p5-btn p5-vol-up" type="button" aria-label="Volume up" data-cursor="link">  
    <img src="plus-icon.png" class="p5-icon" alt="Volume +">  
  </button>  

  <button class="p5-btn p5-full" type="button" aria-label="Fullscreen" data-cursor="link">  
    <img src="expand-icon.png" class="p5-icon p5-full-icon" alt="Fullscreen">  
  </button>  

</div> <!-- CLOSE .p5-controls -->

  </div> <!-- CLOSE .p5-player -->    <div class="video-label">  
    Edit 2 <span>Persona-style player</span>  
  </div>  </div> <!-- CLOSE .video-card -->  
    <!-- CARD 3 -->  
   <div class="video-card">    <div class="p5-player" data-cursor="precision">  
    <video class="p5-video" preload="metadata" playsinline>  
      <source src="video3.mp4" type="video/mp4">  
    </video>  <div class="p5-gestures" aria-hidden="true">  
  <button class="p5-zone p5-left" type="button"></button>  
  <button class="p5-zone p5-mid" type="button"></button>  
  <button class="p5-zone p5-right" type="button"></button>  
</div>  

<div class="p5-hint">+10s</div>  

<button class="p5-bigplay" type="button" aria-label="Play" data-cursor="link">  
  <img src="start.png" alt="Play">  
</button>  

<div class="p5-controls" data-cursor="normal">  

  <button class="p5-btn p5-play" type="button" aria-label="Play/Pause" data-cursor="link">  
    <img src="start.png" class="p5-icon" alt="Play">  
  </button>  

  <button class="p5-btn p5-back" type="button" aria-label="Back 10 seconds" data-cursor="link">  
    <img src="fast-backward-icon.png" class="p5-icon" alt="Back 10s">  
  </button>  

  <div class="p5-time">  
    <span class="p5-current">0:00</span>  
  </div>  

  <input class="p5-progress" type="range"  
         min="0" max="100" value="0" step="0.1"  
         aria-label="Seek" data-cursor="h-resize">  

  <button class="p5-btn p5-fwd" type="button" aria-label="Forward 10 seconds" data-cursor="link">  
    <img src="fast-forward-icon.png" class="p5-icon" alt="Forward 10s">  
  </button>  

  <button class="p5-btn p5-vol-down" type="button" aria-label="Volume down" data-cursor="link">  
    <img src="minus-line-icon.png" class="p5-icon" alt="Volume -">  
  </button>  

  <button class="p5-btn p5-mute" type="button" aria-label="Mute" data-cursor="link">  
    <img src="volume on.png" class="p5-icon p5-mute-icon" alt="Unmuted">  
  </button>  

  <button class="p5-btn p5-vol-up" type="button" aria-label="Volume up" data-cursor="link">  
    <img src="plus-icon.png" class="p5-icon" alt="Volume +">  
  </button>  

  <button class="p5-btn p5-full" type="button" aria-label="Fullscreen" data-cursor="link">  
    <img src="expand-icon.png" class="p5-icon p5-full-icon" alt="Fullscreen">  
  </button>  

</div> <!-- CLOSE .p5-controls -->

  </div> <!-- CLOSE .p5-player -->    <div class="video-label">  
    Edit 3 <span>Persona-style player</span>  
  </div>  </div> <!-- CLOSE .video-card -->  <!-- CARD 4 -->  
<div class="video-card">

  <div class="p5-player" data-cursor="precision">  
    <video class="p5-video" preload="metadata" playsinline>  
      <source src="video4.mp4" type="video/mp4">  
    </video>  <div class="p5-gestures" aria-hidden="true">  
  <button class="p5-zone p5-left" type="button"></button>  
  <button class="p5-zone p5-mid" type="button"></button>  
  <button class="p5-zone p5-right" type="button"></button>  
</div>  

<div class="p5-hint">+10s</div>  

<button class="p5-bigplay" type="button" aria-label="Play" data-cursor="link">  
  <img src="start.png" alt="Play">  
</button>  

<div class="p5-controls" data-cursor="normal">  

  <button class="p5-btn p5-play" type="button" aria-label="Play/Pause" data-cursor="link">  
    <img src="start.png" class="p5-icon" alt="Play">  
  </button>  

  <button class="p5-btn p5-back" type="button" aria-label="Back 10 seconds" data-cursor="link">  
    <img src="fast-backward-icon.png" class="p5-icon" alt="Back 10s">  
  </button>  

  <div class="p5-time">  
    <span class="p5-current">0:00</span>  
  </div>  

  <input class="p5-progress" type="range"  
         min="0" max="100" value="0" step="0.1"  
         aria-label="Seek" data-cursor="h-resize">  

  <button class="p5-btn p5-fwd" type="button" aria-label="Forward 10 seconds" data-cursor="link">  
    <img src="fast-forward-icon.png" class="p5-icon" alt="Forward 10s">  
  </button>  

  <button class="p5-btn p5-vol-down" type="button" aria-label="Volume down" data-cursor="link">  
    <img src="minus-line-icon.png" class="p5-icon" alt="Volume -">  
  </button>  

  <button class="p5-btn p5-mute" type="button" aria-label="Mute" data-cursor="link">  
    <img src="volume on.png" class="p5-icon p5-mute-icon" alt="Unmuted">  
  </button>  

  <button class="p5-btn p5-vol-up" type="button" aria-label="Volume up" data-cursor="link">  
    <img src="plus-icon.png" class="p5-icon" alt="Volume +">  
  </button>  

  <button class="p5-btn p5-full" type="button" aria-label="Fullscreen" data-cursor="link">  
    <img src="expand-icon.png" class="p5-icon p5-full-icon" alt="Fullscreen">  
  </button>  

</div> <!-- CLOSE .p5-controls -->

  </div> <!-- CLOSE .p5-player -->    <div class="video-label">  
    Edit 4 <span>Persona-style player</span>  
  </div>  </div> <!-- CLOSE .video-card -->  </div> <!-- CLOSE .video-grid -->  
</section> <!-- CLOSE #portfolio -->  <section id="contact" class="contact">  
  <div class="contact-wrap">  
    <div class="contact-inner">  
      <div class="contact-kicker">Business / Commissions</div>  
      <h2 class="contact-title">Letâ€™s make something insane.</h2>  
      <p class="contact-sub">Fastest response on Discord. Email is always open for brands, long-term work, and serious inquiries.</p>  <div class="contact-row">  
    <div class="contact-profile">  
      <div class="pfp-ring" data-cursor="link" title="Luvie">  
        <img src="Profilepic.jpg" class="pfp-img" alt="Luvie Profile">  
      </div>  
      <div>  
        <p class="contact-name">Luvie</p>  
        <p class="contact-note">Discord for quick replies â€¢ Email for business</p>  
      </div>  
    </div>  

    <div class="contact-actions">  
      <a class="contact-btn" href="https://discord.com/users/1461961683110072431" target="_blank" rel="noopener" data-cursor="link">  
        <img class="btn-ico" src="Discord.png" alt="">  
        Discord  
      </a>  

      <a class="contact-btn" href="mailto:luvieedits88@gmail.com?subject=Luvie%20Edits%20Inquiry" data-cursor="link">  
        <img class="btn-ico" src="email.png" alt="">  
        Email  
      </a>  
    </div>  
  </div>  
</div>

  </div>  
</section>  <audio id="bgMusic" preload="auto"></audio>

<footer>Â© 2026 Luvie Edits</footer>  
  
      <button id="p5EditorToggle" class="p5-editor-toggle" type="button">
âš™ï¸ Editor
</button>
  <button id="p5EditorToggleDesktop" class="p5-editor-toggle-desktop" type="button">
ðŸ–¥ Desktop Editor
</button>
  
<!-- =========================
     âœ… AE-STYLE MOBILE HERO EDITOR UI (DROP-IN REPLACEMENT)
     Replace ONLY your <div class="p5-layout-panel"...>...</div> with this.
     ========================= -->

<div class="p5-layout-panel" id="p5LayoutPanel">
  <h3>AE Mobile Hero Editor</h3>

  <!-- =========================
       BASIC SIZES (like AE "Transform > Scale")
       ========================= -->
  <div class="ae-group">
    <div class="ae-group-title">Sizes</div>

    <div class="ae-row">
      <div class="ae-label">Bar Height</div>
      <div class="ae-fields">
        <input data-var="--m-frame-h" type="number" value="60" aria-label="Bar Height">
        <span class="ae-unit">px</span>
      </div>
    </div>

    <div class="ae-row">
      <div class="ae-label">Cover Size</div>
      <div class="ae-fields">
        <input data-var="--m-cover" type="number" value="54" aria-label="Cover Size">
        <span class="ae-unit">px</span>
      </div>
    </div>

    <div class="ae-row">
      <div class="ae-label">Icon Size</div>
      <div class="ae-fields">
        <input data-var="--m-icon" type="number" value="10" aria-label="Icon Size">
        <span class="ae-unit">px</span>
      </div>
    </div>

    <div class="ae-row">
      <div class="ae-label">Play Button</div>
      <div class="ae-fields">
        <input data-var="--m-play" type="number" value="35" aria-label="Play Button Size">
        <span class="ae-unit">px</span>
      </div>
    </div>

    <div class="ae-row">
      <div class="ae-label">Title</div>
      <div class="ae-fields">
        <input data-var="--m-title" type="number" value="11" aria-label="Title Size">
        <span class="ae-unit">px</span>
      </div>
    </div>

    <div class="ae-row">
      <div class="ae-label">Artist</div>
      <div class="ae-fields">
        <input data-var="--m-artist" type="number" value="9" aria-label="Artist Size">
        <span class="ae-unit">px</span>
      </div>
    </div>

    <div class="ae-row">
      <div class="ae-label">Volume Width</div>
      <div class="ae-fields">
        <input data-var="--m-vol-w" type="number" value="88" aria-label="Volume Width">
        <span class="ae-unit">px</span>
      </div>
    </div>

    <div class="ae-row">
      <div class="ae-label">Seek Width</div>
      <div class="ae-fields">
        <input data-var="--m-seek-w" data-unit="%" type="number" value="75" aria-label="Seek Width Percent">
        <span class="ae-unit">%</span>
      </div>
    </div>
  </div>

  <!-- =========================
       AE POSITION GROUPS
       Each block = Position X / Y (like AE Transform > Position)
       ========================= -->

  <div class="ae-group">
    <div class="ae-group-title">Position</div>

    <!-- Frame -->
    <details class="ae-block" open>
      <summary class="ae-summary">
        <span class="ae-twisty">â–¾</span>
        <span class="ae-name">Frame</span>
      </summary>

      <div class="ae-xy">
        <div class="ae-xy-label">Position</div>
        <div class="ae-xy-fields">
          <div class="ae-field">
            <span class="ae-axis">X</span>
            <input data-var="--m-frame-x" type="number" value="0" aria-label="Frame Position X">
            <span class="ae-unit">px</span>
          </div>

          <div class="ae-field">
            <span class="ae-axis">Y</span>
            <input data-var="--m-frame-y" type="number" value="0" aria-label="Frame Position Y">
            <span class="ae-unit">px</span>
          </div>
        </div>
      </div>
    </details>

    <!-- Cover -->
    <details class="ae-block">
      <summary class="ae-summary">
        <span class="ae-twisty">â–¾</span>
        <span class="ae-name">Cover</span>
      </summary>

      <div class="ae-xy">
        <div class="ae-xy-label">Position</div>
        <div class="ae-xy-fields">
          <div class="ae-field">
            <span class="ae-axis">X</span>
            <input data-var="--m-cover-x" type="number" value="0" aria-label="Cover Position X">
            <span class="ae-unit">px</span>
          </div>

          <div class="ae-field">
            <span class="ae-axis">Y</span>
            <input data-var="--m-cover-y" type="number" value="0" aria-label="Cover Position Y">
            <span class="ae-unit">px</span>
          </div>
        </div>
      </div>
    </details>

    <!-- Meta -->
    <details class="ae-block">
      <summary class="ae-summary">
        <span class="ae-twisty">â–¾</span>
        <span class="ae-name">Meta (Title/Artist)</span>
      </summary>

      <div class="ae-xy">
        <div class="ae-xy-label">Position</div>
        <div class="ae-xy-fields">
          <div class="ae-field">
            <span class="ae-axis">X</span>
            <input data-var="--m-meta-x" type="number" value="0" aria-label="Meta Position X">
            <span class="ae-unit">px</span>
          </div>

          <div class="ae-field">
            <span class="ae-axis">Y</span>
            <input data-var="--m-meta-y" type="number" value="0" aria-label="Meta Position Y">
            <span class="ae-unit">px</span>
          </div>
        </div>
      </div>
    </details>

    <!-- Actions -->
    <details class="ae-block">
      <summary class="ae-summary">
        <span class="ae-twisty">â–¾</span>
        <span class="ae-name">Actions (Shuffle/Loop/Mute/Vol)</span>
      </summary>

      <div class="ae-xy">
        <div class="ae-xy-label">Position</div>
        <div class="ae-xy-fields">
          <div class="ae-field">
            <span class="ae-axis">X</span>
            <input data-var="--m-actions-x" type="number" value="0" aria-label="Actions Position X">
            <span class="ae-unit">px</span>
          </div>

          <div class="ae-field">
            <span class="ae-axis">Y</span>
            <input data-var="--m-actions-y" type="number" value="0" aria-label="Actions Position Y">
            <span class="ae-unit">px</span>
          </div>
        </div>
      </div>
    </details>

    <!-- Mid -->
    <details class="ae-block">
      <summary class="ae-summary">
        <span class="ae-twisty">â–¾</span>
        <span class="ae-name">Mid (Prev/Play/Next)</span>
      </summary>

      <div class="ae-xy">
        <div class="ae-xy-label">Position</div>
        <div class="ae-xy-fields">
          <div class="ae-field">
            <span class="ae-axis">X</span>
            <input data-var="--m-mid-x" type="number" value="0" aria-label="Mid Position X">
            <span class="ae-unit">px</span>
          </div>

          <div class="ae-field">
            <span class="ae-axis">Y</span>
            <input data-var="--m-mid-y" type="number" value="0" aria-label="Mid Position Y">
            <span class="ae-unit">px</span>
          </div>
        </div>
      </div>
    </details>

    <!-- Bottom -->
    <details class="ae-block">
      <summary class="ae-summary">
        <span class="ae-twisty">â–¾</span>
        <span class="ae-name">Bottom (Time/Seek)</span>
      </summary>

      <div class="ae-xy">
        <div class="ae-xy-label">Position</div>
        <div class="ae-xy-fields">
          <div class="ae-field">
            <span class="ae-axis">X</span>
            <input data-var="--m-bottom-x" type="number" value="0" aria-label="Bottom Position X">
            <span class="ae-unit">px</span>
          </div>

          <div class="ae-field">
            <span class="ae-axis">Y</span>
            <input data-var="--m-bottom-y" type="number" value="0" aria-label="Bottom Position Y">
            <span class="ae-unit">px</span>
          </div>
        </div>
      </div>
    </details>
  </div>

  <!-- =========================
       ACTION BUTTONS
       ========================= -->
  <div class="p5-layout-actions">
    <button type="button" id="p5CopyMobileCSS">Copy Permanent CSS</button>
    <button type="button" class="secondary" id="p5ResetMobileCSS">Reset</button>
  </div>
</div>

  <!-- =========================
     âœ… AE-STYLE DESKTOP HERO EDITOR
     ========================= -->
<div class="p5-layout-panel" id="p5LayoutPanelDesktop">
  <h3>AE Desktop Hero Editor</h3>

  <div class="ae-group">
    <div class="ae-group-title">Sizes</div>

    <div class="ae-row">
      <div class="ae-label">Bar Height</div>
      <div class="ae-fields">
        <input data-var="--d-frame-h" type="number" value="154" aria-label="Bar Height">
        <span class="ae-unit">px</span>
      </div>
    </div>

    <div class="ae-row">
      <div class="ae-label">Cover Size</div>
      <div class="ae-fields">
        <input data-var="--d-cover" type="number" value="122" aria-label="Cover Size">
        <span class="ae-unit">px</span>
      </div>
    </div>

    <div class="ae-row">
      <div class="ae-label">Title Size</div>
      <div class="ae-fields">
        <input data-var="--d-title" type="number" value="16" aria-label="Title Size">
        <span class="ae-unit">px</span>
      </div>
    </div>

    <div class="ae-row">
      <div class="ae-label">Artist Size</div>
      <div class="ae-fields">
        <input data-var="--d-artist" type="number" value="12" aria-label="Artist Size">
        <span class="ae-unit">px</span>
      </div>
    </div>

    <div class="ae-row">
      <div class="ae-label">Volume Width</div>
      <div class="ae-fields">
        <input data-var="--d-vol-w" type="number" value="150" aria-label="Volume Width">
        <span class="ae-unit">px</span>
      </div>
    </div>
  </div>

  <div class="ae-group">
    <div class="ae-group-title">Position</div>

    <details class="ae-block" open>
      <summary class="ae-summary">
        <span class="ae-twisty">â–¾</span>
        <span class="ae-name">Frame</span>
      </summary>
      <div class="ae-xy">
        <div class="ae-xy-fields">
          <div class="ae-field">
            <span class="ae-axis">X</span>
            <input data-var="--d-frame-x" type="number" value="0" aria-label="Frame X">
            <span class="ae-unit">px</span>
          </div>
          <div class="ae-field">
            <span class="ae-axis">Y</span>
            <input data-var="--d-frame-y" type="number" value="0" aria-label="Frame Y">
            <span class="ae-unit">px</span>
          </div>
        </div>
      </div>
    </details>

    <details class="ae-block">
      <summary class="ae-summary">
        <span class="ae-twisty">â–¾</span>
        <span class="ae-name">Cover</span>
      </summary>
      <div class="ae-xy">
        <div class="ae-xy-fields">
          <div class="ae-field">
            <span class="ae-axis">X</span>
            <input data-var="--d-cover-x" type="number" value="0" aria-label="Cover X">
            <span class="ae-unit">px</span>
          </div>
          <div class="ae-field">
            <span class="ae-axis">Y</span>
            <input data-var="--d-cover-y" type="number" value="0" aria-label="Cover Y">
            <span class="ae-unit">px</span>
          </div>
        </div>
      </div>
    </details>

    <details class="ae-block">
      <summary class="ae-summary">
        <span class="ae-twisty">â–¾</span>
        <span class="ae-name">Actions</span>
      </summary>
      <div class="ae-xy">
        <div class="ae-xy-fields">
          <div class="ae-field">
            <span class="ae-axis">X</span>
            <input data-var="--d-actions-x" type="number" value="0" aria-label="Actions X">
            <span class="ae-unit">px</span>
          </div>
          <div class="ae-field">
            <span class="ae-axis">Y</span>
            <input data-var="--d-actions-y" type="number" value="0" aria-label="Actions Y">
            <span class="ae-unit">px</span>
          </div>
        </div>
      </div>
    </details>

    <details class="ae-block">
      <summary class="ae-summary">
        <span class="ae-twisty">â–¾</span>
        <span class="ae-name">Mid</span>
      </summary>
      <div class="ae-xy">
        <div class="ae-xy-fields">
          <div class="ae-field">
            <span class="ae-axis">X</span>
            <input data-var="--d-mid-x" type="number" value="0" aria-label="Mid X">
            <span class="ae-unit">px</span>
          </div>
          <div class="ae-field">
            <span class="ae-axis">Y</span>
            <input data-var="--d-mid-y" type="number" value="0" aria-label="Mid Y">
            <span class="ae-unit">px</span>
          </div>
        </div>
      </div>
    </details>

    <details class="ae-block">
      <summary class="ae-summary">
        <span class="ae-twisty">â–¾</span>
        <span class="ae-name">Bottom</span>
      </summary>
      <div class="ae-xy">
        <div class="ae-xy-fields">
          <div class="ae-field">
            <span class="ae-axis">X</span>
            <input data-var="--d-bottom-x" type="number" value="0" aria-label="Bottom X">
            <span class="ae-unit">px</span>
          </div>
          <div class="ae-field">
            <span class="ae-axis">Y</span>
            <input data-var="--d-bottom-y" type="number" value="0" aria-label="Bottom Y">
            <span class="ae-unit">px</span>
          </div>
        </div>
      </div>
    </details>
  </div>

  <div class="p5-layout-actions">
    <button type="button" id="p5CopyDesktopCSS">Copy Permanent CSS</button>
    <button type="button" class="secondary" id="p5ResetDesktopCSS">Reset</button>
  </div>
</div>

  <script>  
  // =========================  
  // GIF CURSOR ENGINE  
  // =========================  
  const CURSOR_GIFS = {  
    normal: "NORMAL.gif",  
    link: "LINK_SELECT.gif",  
    text: "TEXT_SELECT.gif",  
    precision: "PRECISION.gif",  
    busy: "BUSY.gif",  
    help: "HELP.gif",  
    move: "MOVE.gif",  
    unavailable: "UNAVABIBLE.gif",  
    handwriting: "HANDWRITING.gif",  
    alternate: "ALTERNATE_SELECT.gif",  
    vib: "WIB.gif",  
    hResize: "H_RESIZE.gif",  
    vResize: "V_RESIZE.gif",  
    resize1: "RESIZE_1.gif",  
    resize2: "RESIZE_2.gif",  
  };  
  
  const gifCursor = document.getElementById("gifCursor");  
  const gifCursorImg = document.getElementById("gifCursorImg");  
  const CAN_HOVER = matchMedia("(hover:hover) and (pointer:fine)").matches;  
  
  function preloadGifs(){  
    Object.values(CURSOR_GIFS).forEach(src=>{  
      const i = new Image();  
      i.src = src;  
    });  
  }  
  if(CAN_HOVER){  
    preloadGifs();  
    gifCursor.style.display = "block";  
  }  
  
  let mouseX = -9999, mouseY = -9999;  
  let rafOn = false;  
  let currentCursorKey = "normal";  
  let forceCursorKey = null;  
  
  function setCursor(key){  
    if(!CAN_HOVER) return;  
    if(!key) key = "normal";  
    if(key === currentCursorKey) return;  
    currentCursorKey = key;  
    const src = CURSOR_GIFS[key] || CURSOR_GIFS.normal;  
    if(gifCursorImg.getAttribute("src") !== src){  
      gifCursorImg.setAttribute("src", src);  
    }  
  }  
  
  function updateCursorPos(){  
    rafOn = false;  
    if(!CAN_HOVER) return;  
    const ox = parseInt(getComputedStyle(document.documentElement).getPropertyValue("--cursor-offset-x")) || 0;  
    const oy = parseInt(getComputedStyle(document.documentElement).getPropertyValue("--cursor-offset-y")) || 0;  
    gifCursor.style.transform = `translate(${mouseX + ox}px, ${mouseY + oy}px)`;  
  }  
  
  document.addEventListener("mousemove", (e)=>{  
    if(!CAN_HOVER) return;  
    mouseX = e.clientX;  
    mouseY = e.clientY;  
    if(!rafOn){  
      rafOn = true;  
      requestAnimationFrame(updateCursorPos);  
    }  
  }, {passive:true});  
  
  function closestAttr(el, attr){  
    while(el && el !== document.documentElement){  
      if(el.hasAttribute && el.hasAttribute(attr)) return el;  
      el = el.parentNode;  
    }  
    return null;  
  }  
  
  function mapCssCursorToGif(cssCursor){  
    const c = (cssCursor || "").toLowerCase();  
    if(c.includes("not-allowed") || c.includes("no-drop")) return "unavailable";  
    if(c.includes("help")) return "help";  
    if(c.includes("text")) return "text";  
    if(c.includes("move") || c.includes("grab") || c.includes("grabbing")) return "move";  
    if(c.includes("crosshair")) return "precision";  
    if(c.includes("pointer")) return "link";  
    if(c.includes("ew-resize") || c.includes("col-resize")) return "hResize";  
    if(c.includes("ns-resize") || c.includes("row-resize")) return "vResize";  
    if(c.includes("nwse-resize")) return "resize1";  
    if(c.includes("nesw-resize")) return "resize2";  
    return "normal";  
  }  
  
  function computeCursorFromTarget(target){  
    if(!CAN_HOVER) return "normal";  
    if(forceCursorKey) return forceCursorKey;  
  
    const forcedEl = closestAttr(target, "data-cursor");  
    if(forcedEl){  
      const val = (forcedEl.getAttribute("data-cursor") || "").trim().toLowerCase();  
      if(val === "h-resize") return "hResize";  
      if(val === "v-resize") return "vResize";  
      if(val === "resize-1") return "resize1";  
      if(val === "resize-2") return "resize2";  
      if(CURSOR_GIFS[val]) return val;  
      if(CURSOR_GIFS[val.replace(/-/g,"")]) return val.replace(/-/g,"");  
    }  
  
    if(target){  
      const tag = (target.tagName || "").toLowerCase();  
      if(tag === "a" || tag === "button") return "link";  
      if(tag === "input"){  
        const t = (target.getAttribute("type") || "").toLowerCase();  
        if(["text","email","password","search","url","tel"].includes(t)) return "text";  
        if(t === "range") return "hResize";  
      }  
      if(tag === "textarea") return "text";  
      if(target.isContentEditable) return "text";  
    }  
  
    const sel = window.getSelection?.();  
    if(sel && sel.rangeCount && !sel.isCollapsed) return "text";  
  
    const cssCursor = target ? getComputedStyle(target).cursor : "";  
    return mapCssCursorToGif(cssCursor);  
  }  
  
  document.addEventListener("mouseover", (e)=>{ if(CAN_HOVER) setCursor(computeCursorFromTarget(e.target)); }, {passive:true});  
  document.addEventListener("mousemove", (e)=>{ if(CAN_HOVER) setCursor(computeCursorFromTarget(e.target)); }, {passive:true});  
  document.addEventListener("mousedown", (e)=>{ if(CAN_HOVER) setCursor(computeCursorFromTarget(e.target)); });  
  document.addEventListener("mouseup", (e)=>{ if(CAN_HOVER) setCursor(computeCursorFromTarget(e.target)); });  
  
  function attachBusyCursorToVideos(){  
    document.querySelectorAll("video").forEach(v=>{  
      v.addEventListener("waiting", ()=> { if(CAN_HOVER) setCursor("busy"); });  
      v.addEventListener("stalled", ()=> { if(CAN_HOVER) setCursor("busy"); });  
      v.addEventListener("playing", ()=> { if(CAN_HOVER) setCursor("precision"); });  
      v.addEventListener("pause", ()=> { if(CAN_HOVER) setCursor("precision"); });  
      v.addEventListener("canplay", ()=> { if(CAN_HOVER) setCursor("precision"); });  
    });  
  }  
  attachBusyCursorToVideos();  
  
  // Fullscreen cursor move fix  
  let gifHomeParent = gifCursor.parentNode;  
  function getFsEl(){ return document.fullscreenElement || document.webkitFullscreenElement || null; }  
  function ensureGifCursorInRightPlace(){  
    if(!CAN_HOVER) return;  
    const fs = getFsEl();  
    if(fs){  
      if(gifCursor.parentNode !== fs) fs.appendChild(gifCursor);  
    }else{  
      if(gifCursor.parentNode !== gifHomeParent) gifHomeParent.appendChild(gifCursor);  
    }  
    gifCursor.style.display = "block";  
    gifCursor.style.position = "fixed";  
    gifCursor.style.zIndex = "2147483647";  
  }  
  document.addEventListener("fullscreenchange", ensureGifCursorInRightPlace);  
  document.addEventListener("webkitfullscreenchange", ensureGifCursorInRightPlace);  
  
  // Start at top  
  try { history.scrollRestoration = "manual"; } catch(e){}  
  window.addEventListener("load", () => {  
    if (location.hash) history.replaceState(null, "", location.pathname + location.search);  
    window.scrollTo(0, 0);  
  });  
  window.addEventListener("pageshow", () => window.scrollTo(0,0));  
  
  // =========================  
  // INTRO + AUDIO GATE  
  // =========================  
  const introOverlay = document.getElementById("introOverlay");  
  const introVideo   = document.getElementById("introVideo");  
  const skipIntroBtn = document.getElementById("skipIntro");  
  const tapOverlay   = document.getElementById("tapSoundOverlay");  
  const tapBtn       = document.getElementById("tapSoundBtn");  

  document.body.classList.add("intro-active");
  
  tapOverlay.classList.add("show");  
  document.body.style.overflow = "hidden";  
  
  function restartIntroVideo(){  
    try{  
      introVideo.pause();  
      introVideo.currentTime = 0;  
      introVideo.muted = true;  
    }catch(e){}  
  }  
  introVideo.addEventListener("loadedmetadata", () => {  
    try{ introVideo.currentTime = 0; }catch(e){}  
  });  
    
  // =========================  
  // âœ… P5 HERO MUSIC PLAYER LOGIC  
  // =========================  
  const music = document.getElementById("bgMusic");  

    function syncHeroIcon(){
  setPlayIcon(musicUnlocked && !music.paused);
}

music.addEventListener("play",  syncHeroIcon);
music.addEventListener("pause", syncHeroIcon);
music.addEventListener("ended", syncHeroIcon);
  
  const TRACKS = [  
  {  
    src: "music1.mp3",  
    title: "Ideal and the Real",  
    artist: "Atlus Sound Team",  
    cover: "p5r cover.jpg"  
  },  
  {  
    src: "music2.mp3",  
    title: "Beneath the Mask",  
    artist: "Lyn, Atlus Sound Team",  
    cover: "p5 cover.jpg"  
  },  
  {  
    src: "music3.mp3",  
    title: "No More What Ifs â€“ Instrumental Version",  
    artist: "Atlus Sound Team",  
    cover: "p5r cover.jpg"  
  }  
];  
  
  const heroPlayer = document.getElementById("p5MusicHero");  
  const coverImg   = document.getElementById("p5Cover");  
  const titleEl    = document.getElementById("p5TrackTitle");  
  const artistEl   = document.getElementById("p5TrackArtist");  
  
  const playBtnH   = document.getElementById("p5Play");  
  const playIcon   = document.getElementById("p5PlayIcon");  
  const prevBtn    = document.getElementById("p5Prev");  
  const nextBtn    = document.getElementById("p5Next");  
  
  const shuffleBtn = document.getElementById("p5Shuffle");  
  const loopBtn    = document.getElementById("p5Loop");  
  
  const muteBtnH   = document.getElementById("p5Mute");  
  const volSlider  = document.getElementById("p5Volume");  
  
  const seek       = document.getElementById("p5Seek");  
  const curEl      = document.getElementById("p5Cur");  
  const durEl      = document.getElementById("p5Dur");  
  
  let currentIndex = 0;  
 function applySmartMarquee(el, text){

  // 1ï¸âƒ£ Set title content
  el.innerHTML = `<span class="marquee">${text}</span>`;
  const mq = el.querySelector(".marquee");

  // 2ï¸âƒ£ Wait for layout
  requestAnimationFrame(() => {

    const containerW = el.clientWidth;
    const textW = mq.scrollWidth;

    // 3ï¸âƒ£ Only animate if text overflows
    if(textW > containerW + 2){

      const distance = textW - containerW;

      el.style.setProperty("--marquee-distance", distance + "px");

      const speed = Math.max(10, Math.min(26, distance / 30));
      el.style.setProperty("--marquee-speed", speed + "s");

      el.classList.add("animate");

    } else {

      el.classList.remove("animate");
      el.style.removeProperty("--marquee-distance");
      el.style.removeProperty("--marquee-speed");

    }

  });
}
  let shuffleOn = false;  
  let loopMode = "off"; // "off" | "all" | "one"  
  
  let musicUnlocked = false;  
  let userWantsMusic = false;  
  
  music.preload = "auto";  
  music.volume = Number(volSlider.value);  
  music.muted = false;  
  
  function fmtTime(s){  
    if(!isFinite(s)) return "0:00";  
    const m = Math.floor(s/60);  
    const sec = Math.floor(s%60).toString().padStart(2,"0");  
    return `${m}:${sec}`;  
  }  
  
  function setPlayIcon(playing){  
    playIcon.src = playing ? "pause.png" : "start.png";  
    playIcon.alt = playing ? "Pause" : "Play";  
  }  
  
function setMuteIcon(){  
  const muted = music.muted || music.volume === 0;  
  const img = document.getElementById("p5VolIcon");  
  if(img) img.src = muted ? "volume muted.png" : "volume on.png";  
}  
  
  function setShuffleUI(){  
    shuffleBtn.classList.toggle("active", shuffleOn);  
  }  
  
  function setLoopUI(){  
  loopBtn.classList.toggle("active", loopMode !== "off");  
  const img = loopBtn.querySelector("img");  
  img.src = loopMode === "one"  
    ? "loop-replay-1-icon.png"  
    : "loop-icon.png";  
    loopBtn.setAttribute(  
      "aria-label",  
      loopMode === "off" ? "Loop off" : (loopMode === "all" ? "Loop all" : "Loop one")  
    );  
  }  
  
  function applySeekFill(percent){  
    const p = Math.max(0, Math.min(100, percent));  
    seek.style.background =  
      `linear-gradient(to right, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.95) ${p}%, rgba(255,0,60,0.22) ${p}%, rgba(255,0,60,0.22) 100%)`;  
  }  
  
  function showHero(){  
    heroPlayer.classList.add("show");  
    heroPlayer.classList.remove("hide");  
  }  
  
  function hideHero(){  
    heroPlayer.classList.add("hide");  
    heroPlayer.classList.remove("show");  
  }  
  
  function setTrack(i){

  currentIndex = (i + TRACKS.length) % TRACKS.length;
  const t = TRACKS[currentIndex];

  music.src = t.src;

  // âœ… Apply smart marquee correctly
  applySmartMarquee(titleEl, t.title || t.src);

  if(artistEl) artistEl.textContent = t.artist || "";
  coverImg.src = t.cover;

  seek.value = 0;
  applySeekFill(0);
  curEl.textContent = "0:00";
  durEl.textContent = "0:00";
}
  
  function pickNextIndex(){  
    if(shuffleOn && TRACKS.length > 1){  
      let n = currentIndex;  
      while(n === currentIndex) n = Math.floor(Math.random() * TRACKS.length);  
      return n;  
    }  
    return currentIndex + 1;  
  }  
  
  function pickPrevIndex(){  
    if(shuffleOn && TRACKS.length > 1){  
      let n = currentIndex;  
      while(n === currentIndex) n = Math.floor(Math.random() * TRACKS.length);  
      return n;  
    }  
    return currentIndex - 1;  
  }  
  
  async function unlockAudioFromGesture(){  
    if(musicUnlocked) return true;  
    try{  
      if(!music.src) setTrack(0);  
      await music.play();  
      music.pause();  
      music.currentTime = 0;  
      musicUnlocked = true;  
      setMuteIcon();  
      return true;  
    }catch(e){  
      return false;  
    }  
  }  
  
  async function safePlay(){
  if(!musicUnlocked){
    const ok = await unlockAudioFromGesture();
    if(!ok) return false;
  }

  try{
    await music.play();
    setPlayIcon(true);
    setMuteIcon();
    showHero();                 // âœ… always keep bar visible
    return true;
  }catch(e){
    console.warn("safePlay failed:", e);

    setPlayIcon(false);
    setMuteIcon();

    showHero();                 // âœ… DO NOT hide bar anymore

    // If browser blocked playback, allow user to unlock again
    if(!musicUnlocked && tapOverlay){
      tapOverlay.classList.add("show");
    }

    return false;
  }
}
  
 function safePause(){  
  music.pause();  
  setPlayIcon(false);  
  // âœ… DO NOT hide the bar when paused  
  showHero();  
}  
  
  // âœ… Hook tap button to unlock + start music  
  async function enableSoundAndStartMusic(){  
    const ok = await unlockAudioFromGesture();  
    if(!ok) return;  
  
    userWantsMusic = true;  
    if(!music.src) setTrack(currentIndex);  
  
    music.muted = false;  
    const played = await safePlay();
    syncHeroIcon();
    if(played){
      tapOverlay.classList.remove("show");  
    }  
  }  
  
  tapBtn.addEventListener("click", enableSoundAndStartMusic);  
  tapBtn.addEventListener("touchend", (e)=>{  
    e.preventDefault();  
    enableSoundAndStartMusic();  
  }, {passive:false});  
  
  // Buttons  
  playBtnH.addEventListener("click", async ()=>{  
    if(!musicUnlocked){  
      tapOverlay.classList.add("show");  
      userWantsMusic = false;  
      setPlayIcon(false);  
      return;  
    }  
    userWantsMusic = true;  
  
    if(music.paused){  
      if(!music.src) setTrack(currentIndex);  
      await safePlay();  
    }else{  
      safePause();  
    }  
  });  
  
  prevBtn.addEventListener("click", async ()=>{  
    if(!musicUnlocked){  
      tapOverlay.classList.add("show");  
      return;  
    }  
    userWantsMusic = true;  
    setTrack(pickPrevIndex());  
    await safePlay();  
  });  
  
  nextBtn.addEventListener("click", async ()=>{  
    if(!musicUnlocked){  
      tapOverlay.classList.add("show");  
      return;  
    }  
    userWantsMusic = true;  
    setTrack(pickNextIndex());  
    await safePlay();  
  });  
  
  shuffleBtn.addEventListener("click", ()=>{  
    shuffleOn = !shuffleOn;  
    setShuffleUI();  
  });  
  
  loopBtn.addEventListener("click", ()=>{  
    loopMode = (loopMode === "off") ? "all" : (loopMode === "all" ? "one" : "off");  
    setLoopUI();  
  });  
  
  muteBtnH.addEventListener("click", async ()=>{  
    if(!musicUnlocked){  
      tapOverlay.classList.add("show");  
      return;  
    }  
    music.muted = !music.muted;  
    setMuteIcon();  
  });  
  
  // âœ… Inline volume only (no popup)  
volSlider.addEventListener("input", ()=>{  
  music.volume = Number(volSlider.value);  
  music.muted = (music.volume === 0);  
  setMuteIcon();  
});  
  
  // Seek/progress  
  seek.addEventListener("input", ()=>{  
    if(!music.duration) return;  
    const pct = Number(seek.value);  
    applySeekFill(pct);  
    music.currentTime = (pct/100) * music.duration;  
  });  
  
  music.addEventListener("loadedmetadata", ()=>{  
    durEl.textContent = fmtTime(music.duration);  
  });  
  
  music.addEventListener("timeupdate", ()=>{  
    curEl.textContent = fmtTime(music.currentTime);  
    if(music.duration){  
      const pct = (music.currentTime / music.duration) * 100;  
      seek.value = pct;  
      applySeekFill(pct);  
    }  
  });  
  
  // Ended logic (shuffle + loop) âœ… FIXED: always go to next track
music.addEventListener("ended", async () => {

  // Loop one = replay the same track
  if(loopMode === "one"){
    music.currentTime = 0;
    if(userWantsMusic) await safePlay();
    return;
  }

  // Otherwise always advance (shuffle respected)
  setTrack(pickNextIndex());
  if(userWantsMusic) await safePlay();
}); 
  
  // âœ… Default UI  
  // âœ… random starting track every refresh (shuffle OFF)  
  setTrack(Math.floor(Math.random() * TRACKS.length));  
  setPlayIcon(false);  
  setMuteIcon();  
  setShuffleUI();  
  setLoopUI();  
  applySeekFill(0);  
    
  
  
    
  // =========================  
  // INTRO END / SKIP  
  // =========================  
  let introHiding = false;  
  function hideIntro(){  
    if(introHiding) return;  
    introHiding = true;  
  
    try{ introVideo.pause(); }catch(e){}  
    introOverlay.classList.add("outro");  
  
    setTimeout(()=>{  
      introOverlay.classList.add("hide");  
      tapOverlay.classList.add("hide");  
      tapOverlay.classList.remove("show");  
  
      heroPlayer.classList.add("show");  
      heroPlayer.classList.remove("hide");  
  
      setTimeout(()=>{  
        introOverlay.style.display="none";  
        if(tapOverlay && tapOverlay.parentNode) tapOverlay.remove();  
      }, 560);  
    }, 820);  
  
    document.body.style.overflow = "";  
  
    showHero();  
  
    // âœ… Fix: make sure play icon doesn't look "stuck"  
    setPlayIcon(musicUnlocked && !music.paused);

    document.body.classList.remove("intro-active");
  }  
  introVideo.addEventListener("ended", hideIntro);  
  skipIntroBtn.addEventListener("click", async () => { await unlockAudioFromGesture(); hideIntro(); });  
  
  window.addEventListener("load", () => {  
    restartIntroVideo();  
    introVideo.play().catch(()=>{});  
    ensureGifCursorInRightPlace();  
  });  
    // If intro overlay is gone but body class stuck, clean it up
window.addEventListener("load", () => {
  setTimeout(() => {
    const intro = document.getElementById("introOverlay");
    if(!intro || intro.classList.contains("hide") || intro.style.display === "none"){
      document.body.classList.remove("intro-active");
    }
  }, 1200);
});
  
  // =========================  
  // VIDEO PLAYER CONTROLS (same as before)  
  // =========================  
  function isTouchDevice(){ return ("ontouchstart" in window) || (navigator.maxTouchPoints > 0); }  
  
  function showHint(player, text){  
    const hint = player.querySelector(".p5-hint");  
    if(!hint) return;  
    hint.textContent = text;  
    hint.classList.add("show");  
    clearTimeout(hint._t);  
    hint._t = setTimeout(()=> hint.classList.remove("show"), 450);  
  }  
  
  let activePlayer = null;  
  let activeVideo = null;  
  
  function setActive(player){  
    activePlayer = player;  
    activeVideo = player ? player.querySelector(".p5-video") : null;  
  }  
  
  function exitFs(){  
    if(document.exitFullscreen) return document.exitFullscreen();  
    if(document.webkitExitFullscreen) return document.webkitExitFullscreen();  
  }  
  
  let isPointerInsidePlayer = false;  
  let hoveredPlayer = null;  
  
  document.querySelectorAll(".p5-player").forEach(player=>{  
    const video = player.querySelector(".p5-video");  
    const bigPlay = player.querySelector(".p5-bigplay");  
    const playBtn = player.querySelector(".p5-play");  
    const muteBtnV = player.querySelector(".p5-mute");  
    const fullBtn = player.querySelector(".p5-full");  
    const prog = player.querySelector(".p5-progress");  
    const cur = player.querySelector(".p5-current");  
  
    const backBtn = player.querySelector(".p5-back");  
    const fwdBtn  = player.querySelector(".p5-fwd");  
    const volUp   = player.querySelector(".p5-vol-up");  
    const volDown = player.querySelector(".p5-vol-down");  
  
    const gestures = player.querySelector(".p5-gestures");  
    const left = player.querySelector(".p5-left");  
    const mid = player.querySelector(".p5-mid");  
    const right = player.querySelector(".p5-right");  
  
    video.volume = 0.8;  
    video.muted = false;  
  
    player.addEventListener("mouseenter", () => {  
      isPointerInsidePlayer = true;  
      hoveredPlayer = player;  
      setActive(player);  
      if(CAN_HOVER) setCursor("precision");  
    });  
    player.addEventListener("mouseleave", () => {  
      if(hoveredPlayer === player){  
        isPointerInsidePlayer = false;  
        hoveredPlayer = null;  
        if(CAN_HOVER) setCursor("normal");  
      }  
    });  
  
    async function ensureUnlocked(){  
      if(!musicUnlocked) await unlockAudioFromGesture();  
    }  
  
   function setMuteIconV(){  
  const icon = muteBtnV.querySelector(".p5-mute-icon");  
  if(!icon) return;  
  
  const muted = video.muted || video.volume === 0;  
  icon.src = muted ? "volume muted.png" : "volume on.png";  
  icon.alt = muted ? "Muted" : "Unmuted";  
}  
  
    function setPlayUI(){  
      const playing = !video.paused && !video.ended;  
      bigPlay.style.display = playing ? "none" : "grid";  
      playBtn.innerHTML = playing  
        ? '<img src="pause.png" class="p5-icon" alt="Pause">'  
        : '<img src="start.png" class="p5-icon" alt="Play">';  
    }  
  
    function clamp01(x){ return Math.min(1, Math.max(0, x)); }  
    function bumpVolume(delta){  
      setActive(player);  
      video.muted = false;  
      video.volume = clamp01((video.volume ?? 0.8) + delta);  
      setMuteIconV();  
      showHint(player, `Vol ${Math.round(video.volume * 100)}%`);  
    }  
  
    async function togglePlayerFullscreen(){  
      setActive(player);  
      const fsEl = getFsEl();  
      if(fsEl){ await exitFs(); return; }  
      try{  
        if(player.requestFullscreen) await player.requestFullscreen();  
        else if(player.webkitRequestFullscreen) await player.webkitRequestFullscreen();  
        else if(video.requestFullscreen) await video.requestFullscreen();  
      }catch(e){}  
      setTimeout(ensureGifCursorInRightPlace, 50);  
    }  
  
    player.addEventListener("pointerdown", ()=> setActive(player));  
    bigPlay.addEventListener("click", async ()=> { setActive(player); await ensureUnlocked(); video.play(); });  
    playBtn.addEventListener("click", async ()=> { setActive(player); await ensureUnlocked(); video.paused ? video.play() : video.pause(); });  
  
    video.addEventListener("timeupdate", ()=>{  
      cur.textContent = fmtTime(video.currentTime);  
      if(video.duration) prog.value = (video.currentTime / video.duration) * 100;  
    });  
  
    prog.addEventListener("input", ()=>{  
      if(video.duration) video.currentTime = (Number(prog.value)/100) * video.duration;  
    });  
  
    backBtn?.addEventListener("click", ()=>{  
      setActive(player);  
      video.currentTime = Math.max(0, video.currentTime - 10);  
      showHint(player, "âª -10s");  
    });  
  
    fwdBtn?.addEventListener("click", ()=>{  
      setActive(player);  
      video.currentTime = Math.min(video.duration || Infinity, video.currentTime + 10);  
      showHint(player, "â© +10s");  
    });  
  
    volUp?.addEventListener("click", ()=> bumpVolume(0.1));  
    volDown?.addEventListener("click", ()=> bumpVolume(-0.1));  
  
    muteBtnV.addEventListener("click", ()=>{  
      video.muted = !video.muted;  
      setMuteIconV();  
    });  
  
    fullBtn.addEventListener("click", togglePlayerFullscreen);  
  
   function updateFsIcon(){  
  const fs = !!getFsEl();  
  const icon = fullBtn.querySelector(".p5-full-icon");  
  if(icon){  
    icon.src = fs ? "expand-arrows-two-icon.png" : "expand-icon.png";  
    icon.alt = fs ? "Exit fullscreen" : "Fullscreen";  
  }  
  fullBtn.setAttribute("aria-label", fs ? "Exit fullscreen" : "Fullscreen");  
}  
    player._updateFsIcon = updateFsIcon;  
    updateFsIcon();  
  
    // âœ… pause bg music when video plays, resume after pause/ended (only if user enabled music)  
    video.addEventListener("play", ()=>{  
      setActive(player);  
      if(musicUnlocked && userWantsMusic){  
        safePause(); // âœ… also hides top music bar while video is playing  
      }  
      setPlayUI();  
      if(CAN_HOVER) setCursor("precision");  
    });  
  
    video.addEventListener("pause", ()=>{  
      if(userWantsMusic && musicUnlocked){  
        safePlay(); // âœ… shows bar again when bg music resumes  
      }  
      setPlayUI();  
      if(CAN_HOVER) setCursor("precision");  
    });  
  
    video.addEventListener("ended", ()=>{  
      if(userWantsMusic && musicUnlocked){  
        safePlay(); // âœ… shows bar again when bg music resumes  
      }  
      setPlayUI();  
      if(CAN_HOVER) setCursor("precision");  
    });  
  
    if(gestures){  
      if(!isTouchDevice()){  
        gestures.style.display = "none";  
      }else{  
        mid?.addEventListener("click", async ()=>{  
          setActive(player);  
          await ensureUnlocked();  
          if(video.paused) video.play();  
          else video.pause();  
          showHint(player, video.paused ? "Paused" : "Play");  
        });  
  
        let lastTapL = 0, lastTapR = 0;  
        const dbl = 320;  
  
        left?.addEventListener("click", ()=>{  
          setActive(player);  
          const now = Date.now();  
          if(now - lastTapL < dbl){  
            video.currentTime = Math.max(0, video.currentTime - 10);  
            showHint(player, "âª -10s");  
          }  
          lastTapL = now;  
        });  
  
        right?.addEventListener("click", ()=>{  
          setActive(player);  
          const now = Date.now();  
          if(now - lastTapR < dbl){  
            video.currentTime = Math.min(video.duration || Infinity, video.currentTime + 10);  
            showHint(player, "â© +10s");  
          }  
          lastTapR = now;  
        });  
  
        let pressTimer = null;  
        mid?.addEventListener("touchstart", ()=>{  
          pressTimer = setTimeout(()=>{  
            togglePlayerFullscreen();  
            showHint(player, "Fullscreen");  
          }, 520);  
        }, {passive:true});  
  
        mid?.addEventListener("touchend", ()=> clearTimeout(pressTimer), {passive:true});  
        mid?.addEventListener("touchmove", ()=> clearTimeout(pressTimer), {passive:true});  
      }  
    }  
  
    setMuteIconV();  
    setPlayUI();  
  });  
  
  document.addEventListener("fullscreenchange", ()=>{  
    document.querySelectorAll(".p5-player").forEach(p=> p._updateFsIcon?.());  
    ensureGifCursorInRightPlace();  
  });  
  document.addEventListener("webkitfullscreenchange", ()=>{  
    document.querySelectorAll(".p5-player").forEach(p=> p._updateFsIcon?.());  
    ensureGifCursorInRightPlace();  
  });  
  
  if(!activePlayer){  
    const first = document.querySelector(".p5-player");  
    if(first) setActive(first);  
  }  
   /* ==========================================================
   âœ… TWO EDITORS: Mobile (--m-*) + Desktop (--d-*)
   Fixes "0" bug by using real defaults, not computedStyle.
   ========================================================== */
(function(){

  const root = document.documentElement;

  // ---------- MOBILE ----------
  const panelM = document.getElementById("p5LayoutPanel");          // your existing mobile panel
  const toggleM = document.getElementById("p5EditorToggle");         // your existing mobile toggle button

  const STORAGE_M = "p5_mobile_layout_v2";

  const DEFAULTS_M = {
    "--m-frame-h": "85px",
    "--m-cover": "54px",
    "--m-icon": "8px",
    "--m-play": "33px",
    "--m-title": "11px",
    "--m-artist": "9px",
    "--m-vol-w": "88px",
    "--m-seek-w": "132%",

    "--m-frame-x": "0px",
    "--m-frame-y": "0px",
    "--m-cover-x": "0px",
    "--m-cover-y": "-25px",
    "--m-meta-x": "0px",
    "--m-meta-y": "0px",
    "--m-actions-x": "10px",
    "--m-actions-y": "-5px",
    "--m-mid-x": "0px",
    "--m-mid-y": "10px",
    "--m-bottom-x": "-65px",
    "--m-bottom-y": "-14px",
  };

  // ---------- DESKTOP ----------
  const panelD = document.getElementById("p5LayoutPanelDesktop");
  const toggleD = document.getElementById("p5EditorToggleDesktop");

  const STORAGE_D = "p5_desktop_layout_v1";

  // These defaults match your CURRENT desktop layout (so editor never shows 0)
  const DEFAULTS_D = {
    "--d-player-width": "760px",
    "--d-player-top": "12px",          // note: calc() can't be a number input, so we keep top fixed in CSS
    "--d-frame-h": "105px",
    "--d-cover": "122px",
    "--d-title": "16px",
    "--d-artist": "12px",
    "--d-vol-w": "111px",

    "--d-frame-x": "0px",
    "--d-frame-y": "0px",
    "--d-cover-x": "0px",
    "--d-cover-y": "0px",
    "--d-meta-x": "0px",
    "--d-meta-y": "0px",
    "--d-actions-x": "0px",
    "--d-actions-y": "-20px",
    "--d-mid-x": "250px",
    "--d-mid-y": "0px",
    "--d-bottom-x": "0px",
    "--d-bottom-y": "-58px",
  };

  // ---------- helpers ----------
  function setVar(name, value){
    root.style.setProperty(name, value);
  }

  function getInlineOrDefault(name, defaults){
    const inline = root.style.getPropertyValue(name).trim();
    if(inline) return inline;
    return defaults[name] || "0px";
  }

  function applyDefaults(defaults){
    Object.entries(defaults).forEach(([k,v]) => setVar(k, v));
  }

  function loadSaved(storageKey, defaults){
    const raw = localStorage.getItem(storageKey);
    if(!raw){
      applyDefaults(defaults);
      return;
    }
    try{
      const saved = JSON.parse(raw);
      Object.entries(defaults).forEach(([k,def])=>{
        setVar(k, saved[k] || def);
      });
    }catch(e){
      applyDefaults(defaults);
    }
  }

  function saveNow(storageKey, defaults){
    const out = {};
    Object.keys(defaults).forEach(k => out[k] = getInlineOrDefault(k, defaults));
    localStorage.setItem(storageKey, JSON.stringify(out));
  }

  function bindPanel(panel, defaults, storageKey){
    if(!panel) return;

    const inputs = panel.querySelectorAll("[data-var]");

    function syncInputs(){
      inputs.forEach(inp=>{
        const v = inp.dataset.var;
        const cur = getInlineOrDefault(v, defaults);
        inp.value = parseFloat(cur) || parseFloat(defaults[v]) || 0;
      });
    }

    inputs.forEach(inp=>{
      const onChange = ()=>{
        const v = inp.dataset.var;
        const unit = inp.dataset.unit || "px";
        const n = Number(inp.value);
        if(!Number.isFinite(n)) return;

        setVar(v, unit === "%" ? `${n}%` : `${n}px`);
        saveNow(storageKey, defaults);
      };

      inp.addEventListener("input", onChange);
      inp.addEventListener("change", onChange);
    });

    // initial sync
    syncInputs();

    return { syncInputs };
  }

  // ---------- INIT MOBILE ----------
  if(panelM && toggleM){
    loadSaved(STORAGE_M, DEFAULTS_M);
    const mobile = bindPanel(panelM, DEFAULTS_M, STORAGE_M);

    toggleM.addEventListener("pointerup", (e)=>{
      e.preventDefault();
      document.body.classList.toggle("p5-layout-edit");
      // make sure values show correctly when opening
      mobile?.syncInputs?.();
    });

    document.getElementById("p5ResetMobileCSS")?.addEventListener("click", ()=>{
      localStorage.removeItem(STORAGE_M);
      applyDefaults(DEFAULTS_M);
      mobile?.syncInputs?.();
    });

    document.getElementById("p5CopyMobileCSS")?.addEventListener("click", async ()=>{
      let css = `@media (max-width: 820px) and (hover: none) and (pointer: coarse) {\n  :root{\n`;
      Object.keys(DEFAULTS_M).forEach(k=>{
        css += `    ${k}: ${getInlineOrDefault(k, DEFAULTS_M)};\n`;
      });
      css += "  }\n}";
      try{
        await navigator.clipboard.writeText(css);
        alert("Copied Mobile CSS! Paste into your CSS to keep forever.");
      }catch(e){
        console.log(css);
        alert("Clipboard blocked. CSS printed in console.");
      }
    });
  }

  // ---------- INIT DESKTOP ----------
  if(panelD && toggleD){
    loadSaved(STORAGE_D, DEFAULTS_D);
    const desk = bindPanel(panelD, DEFAULTS_D, STORAGE_D);

    toggleD.addEventListener("pointerup", (e)=>{
      e.preventDefault();
      document.body.classList.toggle("p5-layout-edit-desktop");
      desk?.syncInputs?.();
    });

    document.getElementById("p5ResetDesktopCSS")?.addEventListener("click", ()=>{
      localStorage.removeItem(STORAGE_D);
      applyDefaults(DEFAULTS_D);
      desk?.syncInputs?.();
    });

    document.getElementById("p5CopyDesktopCSS")?.addEventListener("click", async ()=>{
      let css = `@media (min-width: 821px) and (hover:hover) and (pointer:fine) {\n  :root{\n`;
      Object.keys(DEFAULTS_D).forEach(k=>{
        css += `    ${k}: ${getInlineOrDefault(k, DEFAULTS_D)};\n`;
      });
      css += "  }\n}";
      try{
        await navigator.clipboard.writeText(css);
        alert("Copied Desktop CSS! Paste into your CSS to keep forever.");
      }catch(e){
        console.log(css);
        alert("Clipboard blocked. CSS printed in console.");
      }
    });
  }

})();
    
    window.addEventListener("resize", () => {
  const t = TRACKS[currentIndex];
  const title = t?.title || t?.src || "";
  if(title) applySmartMarquee(titleEl, title);
});

    
</script>  
</body>  
</html>
